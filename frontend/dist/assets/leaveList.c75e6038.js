var ae=Object.defineProperty,le=Object.defineProperties;var se=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var j=(e,i,_)=>i in e?ae(e,i,{enumerable:!0,configurable:!0,writable:!0,value:_}):e[i]=_,G=(e,i)=>{for(var _ in i||(i={}))oe.call(i,_)&&j(e,_,i[_]);if(q)for(var _ of q(i))ie.call(i,_)&&j(e,_,i[_]);return e},O=(e,i)=>le(e,se(i));import{aI as ne,aJ as re,aK as de,aL as me,aM as fe,aN as ve,J as pe,e as _e,aP as Fe,aR as he,j as Ae,r as W,B as J,c as ce,k as we,E as y,w as be,D as ye,m as c,aB as De,f as C,g as ge,i as p,t,s as u,q as k,S as Be,O as R,P as $,Q as r,y as h,N as K,aq as Ce,p as Ee,h as Se}from"./vendor.e05abf4c.js";import{_ as Le,p as Ve,d as E}from"./index.63817855.js";import{u as T,w as ke}from"./xlsx.15116878.js";ne([re,de,me,fe,ve]);let I;const Re=(e,i)=>{const _=pe(e);I={tooltip:{trigger:"item"},legend:{top:"2%",left:"center"},series:[{name:"\u8BF7\u5047\u8BB0\u5F55\u76F8\u5173\u7EDF\u8BA1",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"20",fontWeight:"bold"}},labelLine:{show:!1},data:i}]},I&&_.setOption(I)};const $e=_e({name:"leaveList",computed:{Download(){return Fe},Odometer(){return he}},directives:{permission:Ve},setup(){const e=Ae(),i=W(),_=W(null),a=J({loading:!1,currentPage:1,pageSize:5,search:"",modifyFormVisible:!1,detailFormVisible:!1,statisticsVisible:!1,form:{},statistics:{pass:0,rej:0,unfin:0},record_cnt:0,filters:{status:""},status_options:[{value:"\u672A\u5BA1\u6838",label:"\u672A\u5BA1\u6838"},{value:"\u5DF2\u901A\u8FC7",label:"\u5DF2\u901A\u8FC7"},{value:"\u672A\u901A\u8FC7",label:"\u672A\u901A\u8FC7"}],myData:[],reviewData:[],notifyData:[],adminData:[],paginatedMyData:[],paginatedReviewData:[],paginatedNotifyData:[],paginatedAdminData:[],isMyLeaveShow:!0,isReviewLeaveShow:!1,isNotifyLeaveShow:!1,isAdminLeaveShow:!1}),N=J({user:"",region:""}),U=1,v=()=>{a.isMyLeaveShow=!0,a.isReviewLeaveShow=!1,a.isNotifyLeaveShow=!1,a.isAdminLeaveShow=!1,F()},m=()=>{a.isMyLeaveShow=!1,a.isReviewLeaveShow=!0,a.isNotifyLeaveShow=!1,a.isAdminLeaveShow=!1,F()},S=()=>{a.isMyLeaveShow=!1,a.isReviewLeaveShow=!1,a.isNotifyLeaveShow=!0,a.isAdminLeaveShow=!1,F()},d=()=>{a.isMyLeaveShow=!1,a.isReviewLeaveShow=!1,a.isNotifyLeaveShow=!1,a.isAdminLeaveShow=!0,F()};ce(()=>{L(),g(),F()});const D=()=>{i.value.clearFilter("date")},A=we(()=>localStorage.getItem("role")==="admin"),g=()=>{sessionStorage.getItem("showPendingLeave")==="1"&&(a.filters.status="\u672A\u5BA1\u6838"),sessionStorage.setItem("showPendingLeave",String(0))},F=()=>{let n=[];a.isMyLeaveShow?n=a.myData:a.isReviewLeaveShow?n=a.reviewData:a.isNotifyLeaveShow?n=a.notifyData:a.isAdminLeaveShow&&(n=a.adminData),a.search&&(n=n.filter(l=>l.leave_id.toString().toLowerCase().includes(a.search.toLowerCase()))),a.filters.status&&(n=n.filter(l=>l.leave_status===a.filters.status)),a.record_cnt=n.length;const o=(a.currentPage-1)*a.pageSize,f=a.currentPage*a.pageSize;a.isMyLeaveShow?a.paginatedMyData=n.slice(o,f):a.isReviewLeaveShow?a.paginatedReviewData=n.slice(o,f):a.isNotifyLeaveShow?a.paginatedNotifyData=n.slice(o,f):a.isAdminLeaveShow&&(a.paginatedAdminData=n.slice(o,f))},L=()=>{try{E.postGetMyLeaveRecord().then(n=>{if(n){a.myData=[];var o=n.data;for(let l=0;l<o.length;l++){var f={leave_id:o[l].leave_id,leave_user_id:o[l].user_id,leave_review_user_id:o[l].review_user_id,leave_start_time:o[l].start_date,leave_end_time:o[l].end_date,leave_type:o[l].type,leave_reason:o[l].reason,leave_status:o[l].status,leave_submitted_at:o[l].submitted_at,username:o[l].username};a.myData.push(f)}F()}else console.log("postGetLeaveApproval RES MISS")}),E.postGetReviewLeaveRecord().then(n=>{if(n){a.reviewData=[];var o=n.data;for(let l=0;l<o.length;l++){var f={leave_id:o[l].leave_id,leave_user_id:o[l].user_id,leave_review_user_id:o[l].review_user_id,leave_start_time:o[l].start_date,leave_end_time:o[l].end_date,leave_type:o[l].type,leave_reason:o[l].reason,leave_status:o[l].status,leave_submitted_at:o[l].submitted_at,username:o[l].username};a.reviewData.push(f)}F()}else console.log("postGetLeaveApproval RES MISS")}),E.postGetNotifyLeaveRecord().then(n=>{if(n){a.notifyData=[];var o=n.data;for(let l=0;l<o.length;l++){var f={leave_id:o[l].leave_id,leave_user_id:o[l].user_id,leave_review_user_id:o[l].review_user_id,leave_start_time:o[l].start_date,leave_end_time:o[l].end_date,leave_type:o[l].type,leave_reason:o[l].reason,leave_status:o[l].status,leave_submitted_at:o[l].submitted_at,username:o[l].username};a.notifyData.push(f)}F()}else console.log("postGetLeaveApproval RES MISS")})}catch(n){y({type:"warning",message:n.message})}if(A.value)try{E.postGetAdminLeaveRecord().then(n=>{if(n){a.adminData=[];var o=n.data;for(let l=0;l<o.length;l++){var f={leave_id:o[l].leave_id,leave_user_id:o[l].user_id,leave_review_user_id:o[l].review_user_id,leave_start_time:o[l].start_date,leave_end_time:o[l].end_date,leave_type:o[l].type,leave_reason:o[l].reason,leave_status:o[l].status,leave_submitted_at:o[l].submitted_at,username:o[l].username};a.adminData.push(f)}F()}else console.log("postGetLeaveApproval RES MISS")})}catch(n){y({type:"warning",message:n.message})}},B=()=>a.isMyLeaveShow?a.myData:a.isReviewLeaveShow?a.reviewData:a.isNotifyLeaveShow?a.notifyData:a.isAdminLeaveShow?a.adminData:[],M=()=>{i.value.clearFilter()};be(()=>a.search,()=>{F()});const s=n=>{a.modifyFormVisible=!0,a.form=n},w=n=>{a.detailFormVisible=!0,a.form=n},Q=()=>{a.modifyFormVisible=!1;let n=a.form;a.form={};try{E.postModifyLeaveApproval(n).then(o=>{})}catch(o){y({type:"warning",message:o.message})}},H=(n,o)=>{console.log(n,o);let f={leave_id:o.leave_id};try{E.deleteLeaveApproval(f).then(l=>{})}catch(l){y({type:"warning",message:l.message})}a.tableData.splice(n,1)},X=n=>{a.pageSize=n,a.currentPage=1,F()},Y=n=>{a.currentPage=n,F()},Z=()=>{e.replace("/leaveApproval/leaveRequest")},x=()=>{K.confirm("\u786E\u5B9A\u8981\u6253\u5370\u5F53\u524D\u8868\u683C\u6570\u636E\u5417\uFF1F","\u6E29\u99A8\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"info"}).then(()=>{const o=`
      <html>
        <head>
          <title>\u6253\u5370\u8BF7\u5047\u6570\u636E</title>
          <style>
            table { width: 100%; border-collapse: collapse; }
            th, td { border: 1px solid #000; padding: 8px; text-align: left; }
          </style>
        </head>
        <body>
          <h2>\u8BF7\u5047\u6570\u636E</h2>
          <table>
            <thead>
              <tr>
                <th>\u8BF7\u5047\u7F16\u53F7</th>
                <th>\u63D0\u4EA4\u7528\u6237ID</th>
                <th>\u5F00\u59CB\u65F6\u95F4</th>
                <th>\u7ED3\u675F\u65F6\u95F4</th>
                <th>\u8BF7\u5047\u7C7B\u578B</th>
                <th>\u8BF7\u5047\u539F\u56E0</th>
                <th>\u72B6\u6001</th>
                <th>\u63D0\u4EA4\u65F6\u95F4</th>
              </tr>
            </thead>
            <tbody>
              ${B().map(l=>`
                <tr>
                  <td>${l.leave_id}</td>
                  <td>${l.leave_user_id}</td>
                  <td>${l.leave_start_time}</td>
                  <td>${l.leave_end_time}</td>
                  <td>${l.leave_type}</td>
                  <td>${l.leave_reason}</td>
                  <td>${l.leave_status}</td>
                  <td>${l.leave_submitted_at}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
        </body>
      </html>
    `,f=window.open("","","height=600,width=800");f?(f.document.write(o),f.document.close(),setTimeout(()=>{f.print(),f.close()},500)):y({type:"error",message:"\u65E0\u6CD5\u6253\u5F00\u6253\u5370\u7A97\u53E3"})}).catch(()=>{y({type:"info",message:"\u5DF2\u53D6\u6D88"})})},ee=()=>{K.confirm("\u786E\u5B9A\u8981\u5BFC\u51FA\u5F53\u524D\u8868\u683C\u6570\u636E\u4E3A Excel \u5417\uFF1F","\u6E29\u99A8\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"info"}).then(()=>{const o=B().map(b=>({\u8BF7\u5047\u7F16\u53F7:b.leave_id,\u63D0\u4EA4\u7528\u6237ID:b.leave_user_id,\u5F00\u59CB\u65F6\u95F4:b.leave_start_time,\u7ED3\u675F\u65F6\u95F4:b.leave_end_time,\u8BF7\u5047\u7C7B\u578B:b.leave_type,\u8BF7\u5047\u539F\u56E0:b.leave_reason,\u72B6\u6001:b.leave_status,\u63D0\u4EA4\u65F6\u95F4:b.leave_submitted_at})),f=T.json_to_sheet(o),l=T.book_new();T.book_append_sheet(l,f,"\u8BF7\u5047\u6570\u636E"),ke(l,"\u8BF7\u5047\u6570\u636E.xlsx"),y({type:"success",message:"Excel \u6587\u4EF6\u5DF2\u751F\u6210\u5E76\u4E0B\u8F7D"})}).catch(()=>{y({type:"info",message:"\u5DF2\u53D6\u6D88"})})},te=()=>{a.statisticsVisible=!0;const n=B();let o=0,f=0,l=0;n.forEach(P=>{P.leave_status==="\u5DF2\u901A\u8FC7"?o++:P.leave_status==="\u672A\u901A\u8FC7"?f++:P.leave_status==="\u672A\u5BA1\u6838"&&l++}),a.statistics.pass=o,a.statistics.rej=f,a.statistics.unfin=l;const b=[{name:"\u5DF2\u901A\u8FC7",value:o},{name:"\u672A\u901A\u8FC7",value:f},{name:"\u672A\u5BA1\u6838",value:l}];Ce(()=>{_.value?Re(_.value,b):console.log("refAverageSales not exist!")})},ue=(n,o)=>o.leave_status===n;return O(G({formInline:N,total:U},ye(a)),{handleCurrentChange:Y,handleSizeChange:X,onLeaveRequest:Z,handleEdit:Q,handleDelete:H,filterTableRef:i,resetDateFilter:D,clearFilter:M,getCurrentTableData:B,filterStatus:ue,modifyPop:s,detailPop:w,filterLeaveStatus:g,showMyLeave:v,showReviewLeave:m,showNotifyLeave:S,showAdminLeave:d,isAdmin:A,onDownload:x,onToExcel:ee,onShowStatistics:te,refAverageSales:_})}}),z=e=>(Ee("data-v-9b7d102a"),e=e(),Se(),e),ze={class:"table-container"},Me=r("\u8BF7\u5047\u7533\u8BF7"),Pe=r("\u6211\u7684\u8BF7\u5047\u7533\u8BF7"),Te=r("\u6211\u5904\u7406\u7684\u8BF7\u5047\u7533\u8BF7"),Ie=r("\u6284\u9001\u7ED9\u6211\u7684\u8BF7\u5047\u7533\u8BF7"),Ne=r("\u6240\u6709\u8BF7\u5047\u7533\u8BF7"),Ue=r("\u6253\u5370"),qe=r("\u5BFC\u51FA"),je=r("\u7EDF\u8BA1\u4FE1\u606F"),Ge=r("\u4FEE\u6539"),Oe=r("\u67E5\u770B\u8BE6\u60C5"),We=r("\u5220\u9664"),Je=r("\u67E5\u770B\u8BE6\u60C5"),Ke=r("\u5220\u9664"),Qe=r("\u5904\u7406"),He=r("\u67E5\u770B\u8BE6\u60C5"),Xe=r("\u5220\u9664"),Ye=r("\u67E5\u770B\u8BE6\u60C5"),Ze={slot:"footer",class:"dialog-footer"},xe=r("\u53D6\u6D88"),et=r("\u786E\u5B9A"),tt={slot:"footer",class:"dialog-footer"},ut=r("\u786E\u5B9A"),at=z(()=>p("span",null,[p("i",{class:"icon-square red"}),r(" \u603B\u8BB0\u5F55\u6570 ")],-1)),lt=r(),st={class:"e-chart",style:{height:"201px",width:"100%"}},ot={ref:"refAverageSales",style:{width:"inherit",height:"inherit"}},it={class:"chart-widget-list"},nt=z(()=>p("span",null,[p("i",{class:"icon-square green"}),r(" \u5DF2\u901A\u8FC7")],-1)),rt=z(()=>p("span",null,[p("i",{class:"icon-square deep-blue"}),r(" \u672A\u5BA1\u6838 ")],-1)),dt=r(),mt=z(()=>p("span",null,[p("i",{class:"icon-square red"}),r(" \u672A\u901A\u8FC7 ")],-1)),ft=r(),vt={slot:"footer",class:"dialog-footer"},pt=r("\u786E\u8BA4");function _t(e,i,_,a,N,U){const v=c("el-button"),m=c("el-form-item"),S=c("el-form"),d=c("el-table-column"),D=c("el-tag"),A=c("el-input"),g=c("el-popconfirm"),F=c("el-table"),L=c("el-dialog"),B=c("el-card"),M=c("el-pagination"),V=De("loading");return C(),ge("div",null,[p("div",ze,[t(S,{inline:!0,model:e.formInline,class:"form-inline"},{default:u(()=>[t(m,null,{default:u(()=>[t(v,{type:"primary",onClick:e.onLeaveRequest},{default:u(()=>[Me]),_:1},8,["onClick"])]),_:1}),t(m,null,{default:u(()=>[t(v,{type:"primary",onClick:e.showMyLeave},{default:u(()=>[Pe]),_:1},8,["onClick"])]),_:1}),t(m,null,{default:u(()=>[t(v,{type:"primary",onClick:e.showReviewLeave},{default:u(()=>[Te]),_:1},8,["onClick"])]),_:1}),t(m,null,{default:u(()=>[t(v,{type:"primary",onClick:e.showNotifyLeave},{default:u(()=>[Ie]),_:1},8,["onClick"])]),_:1}),t(m,null,{default:u(()=>[e.isAdmin?(C(),k(v,{key:0,type:"primary",onClick:e.showAdminLeave},{default:u(()=>[Ne]),_:1},8,["onClick"])):Be("",!0)]),_:1}),t(m,null,{default:u(()=>[t(v,{type:"primary",onClick:e.onDownload,icon:e.Download},{default:u(()=>[Ue]),_:1},8,["onClick","icon"])]),_:1}),t(m,null,{default:u(()=>[t(v,{type:"primary",onClick:e.onToExcel,icon:e.Download},{default:u(()=>[qe]),_:1},8,["onClick","icon"])]),_:1}),t(m,null,{default:u(()=>[t(v,{type:"primary",onClick:i[0]||(i[0]=s=>e.onShowStatistics()),icon:e.Odometer},{default:u(()=>[je]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"]),R((C(),k(F,{ref:"filterTableRef",class:"table-list","row-key":"date",data:e.paginatedAdminData,style:{width:"100%"}},{default:u(()=>[t(d,{prop:"leave_user_id",label:"\u63D0\u4EA4\u7528\u6237id",width:"180",truncated:""}),t(d,{prop:"username",label:"\u63D0\u4EA4\u7528\u6237",width:"180",truncated:""}),t(d,{prop:"leave_submitted_at",label:"\u63D0\u4EA4\u65E5\u671F",sortable:"",width:"180","column-key":"leave_submitted_at"}),t(d,{prop:"leave_start_time",label:"\u5F00\u59CB\u65F6\u95F4",width:"180",truncated:""}),t(d,{prop:"leave_end_time",label:"\u7ED3\u675F\u65F6\u95F4",width:"180",truncated:""}),t(d,{prop:"leave_reason",label:"\u539F\u56E0",truncated:""}),t(d,{prop:"leave_status",label:"\u5904\u7406\u72B6\u6001",width:"100",filters:[{text:"\u5DF2\u901A\u8FC7",value:"\u5DF2\u901A\u8FC7"},{text:"\u672A\u901A\u8FC7",value:"\u672A\u901A\u8FC7"},{text:"\u672A\u5BA1\u6838",value:"\u672A\u5BA1\u6838"}],"filter-method":e.filterStatus,"filter-multiple":!0,"filtered-value":e.filters.status?[e.filters.status]:[],"filter-placement":"bottom-end"},{default:u(s=>[t(D,{type:s.row.leave_status==="\u5DF2\u901A\u8FC7"?"success":s.row.leave_status==="\u672A\u5BA1\u6838"?"primary":"danger","disable-transitions":""},{default:u(()=>[r(h(s.row.leave_status),1)]),_:2},1032,["type"])]),_:1},8,["filter-method","filtered-value"]),t(d,{align:"right"},{header:u(()=>[t(A,{modelValue:e.search,"onUpdate:modelValue":i[1]||(i[1]=s=>e.search=s),size:"small",placeholder:"\u641C\u7D22"},null,8,["modelValue"])]),default:u(s=>[t(v,{size:"small",onClick:w=>e.modifyPop(s.row)},{default:u(()=>[Ge]),_:2},1032,["onClick"]),t(v,{size:"small",onClick:w=>e.detailPop(s.row)},{default:u(()=>[Oe]),_:2},1032,["onClick"]),t(g,{"confirm-button-text":"\u786E\u5B9A","cancel-button-text":"\u53D6\u6D88",icon:"el-icon-info","icon-color":"red",title:"\u786E\u5B9A\u5220\u9664\u8BE5\u6761\u8BB0\u5F55\u5417\uFF1F",onConfirm:w=>e.handleDelete(s.$index,s.row)},{reference:u(()=>[t(v,{size:"small",type:"danger"},{default:u(()=>[We]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[V,e.loading],[$,e.isAdminLeaveShow]]),R((C(),k(F,{ref:"filterTableRef",class:"table-list","row-key":"date",data:e.paginatedMyData,style:{width:"100%"}},{default:u(()=>[t(d,{prop:"leave_user_id",label:"\u63D0\u4EA4\u7528\u6237id",width:"180",truncated:""}),t(d,{prop:"username",label:"\u63D0\u4EA4\u7528\u6237",width:"180",truncated:""}),t(d,{prop:"leave_submitted_at",label:"\u63D0\u4EA4\u65E5\u671F",sortable:"",width:"180","column-key":"leave_submitted_at"}),t(d,{prop:"leave_start_time",label:"\u5F00\u59CB\u65F6\u95F4",width:"180",truncated:""}),t(d,{prop:"leave_end_time",label:"\u7ED3\u675F\u65F6\u95F4",width:"180",truncated:""}),t(d,{prop:"leave_reason",label:"\u539F\u56E0",truncated:""}),t(d,{prop:"leave_status",label:"\u5904\u7406\u72B6\u6001",width:"100",filters:[{text:"\u5DF2\u901A\u8FC7",value:"\u5DF2\u901A\u8FC7"},{text:"\u672A\u901A\u8FC7",value:"\u672A\u901A\u8FC7"},{text:"\u672A\u5BA1\u6838",value:"\u672A\u5BA1\u6838"}],"filter-method":e.filterStatus,"filter-multiple":!0,"filtered-value":e.filters.status?[e.filters.status]:[],"filter-placement":"bottom-end"},{default:u(s=>[t(D,{type:s.row.leave_status==="\u5DF2\u901A\u8FC7"?"success":s.row.leave_status==="\u672A\u5BA1\u6838"?"primary":"danger","disable-transitions":""},{default:u(()=>[r(h(s.row.leave_status),1)]),_:2},1032,["type"])]),_:1},8,["filter-method","filtered-value"]),t(d,{align:"right"},{header:u(()=>[t(A,{modelValue:e.search,"onUpdate:modelValue":i[2]||(i[2]=s=>e.search=s),size:"small",placeholder:"\u641C\u7D22"},null,8,["modelValue"])]),default:u(s=>[t(v,{size:"small",onClick:w=>e.detailPop(s.row)},{default:u(()=>[Je]),_:2},1032,["onClick"]),t(g,{"confirm-button-text":"\u786E\u5B9A","cancel-button-text":"\u53D6\u6D88",icon:"el-icon-info","icon-color":"red",title:"\u786E\u5B9A\u5220\u9664\u8BE5\u6761\u8BB0\u5F55\u5417\uFF1F",onConfirm:w=>e.handleDelete(s.$index,s.row)},{reference:u(()=>[t(v,{size:"small",type:"danger"},{default:u(()=>[Ke]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[V,e.loading],[$,e.isMyLeaveShow]]),R((C(),k(F,{ref:"filterTableRef",class:"table-list","row-key":"date",data:e.paginatedReviewData,style:{width:"100%"}},{default:u(()=>[t(d,{prop:"leave_user_id",label:"\u63D0\u4EA4\u7528\u6237id",width:"180",truncated:""}),t(d,{prop:"username",label:"\u63D0\u4EA4\u7528\u6237",width:"180",truncated:""}),t(d,{prop:"leave_submitted_at",label:"\u63D0\u4EA4\u65E5\u671F",sortable:"",width:"180","column-key":"leave_submitted_at"}),t(d,{prop:"leave_start_time",label:"\u5F00\u59CB\u65F6\u95F4",width:"180",truncated:""}),t(d,{prop:"leave_end_time",label:"\u7ED3\u675F\u65F6\u95F4",width:"180",truncated:""}),t(d,{prop:"leave_reason",label:"\u539F\u56E0",truncated:""}),t(d,{prop:"leave_status",label:"\u5904\u7406\u72B6\u6001",width:"100",filters:[{text:"\u5DF2\u901A\u8FC7",value:"\u5DF2\u901A\u8FC7"},{text:"\u672A\u901A\u8FC7",value:"\u672A\u901A\u8FC7"},{text:"\u672A\u5BA1\u6838",value:"\u672A\u5BA1\u6838"}],"filter-method":e.filterStatus,"filter-multiple":!0,"filtered-value":e.filters.status?[e.filters.status]:[],"filter-placement":"bottom-end"},{default:u(s=>[t(D,{type:s.row.leave_status==="\u5DF2\u901A\u8FC7"?"success":s.row.leave_status==="\u672A\u5BA1\u6838"?"primary":"danger","disable-transitions":""},{default:u(()=>[r(h(s.row.leave_status),1)]),_:2},1032,["type"])]),_:1},8,["filter-method","filtered-value"]),t(d,{align:"right"},{header:u(()=>[t(A,{modelValue:e.search,"onUpdate:modelValue":i[3]||(i[3]=s=>e.search=s),size:"small",placeholder:"\u641C\u7D22"},null,8,["modelValue"])]),default:u(s=>[t(v,{size:"small",onClick:w=>e.modifyPop(s.row)},{default:u(()=>[Qe]),_:2},1032,["onClick"]),t(v,{size:"small",onClick:w=>e.detailPop(s.row)},{default:u(()=>[He]),_:2},1032,["onClick"]),t(g,{"confirm-button-text":"\u786E\u5B9A","cancel-button-text":"\u53D6\u6D88",icon:"el-icon-info","icon-color":"red",title:"\u786E\u5B9A\u5220\u9664\u8BE5\u6761\u8BB0\u5F55\u5417\uFF1F",onConfirm:w=>e.handleDelete(s.$index,s.row)},{reference:u(()=>[t(v,{size:"small",type:"danger"},{default:u(()=>[Xe]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[V,e.loading],[$,e.isReviewLeaveShow]]),R((C(),k(F,{ref:"filterTableRef",class:"table-list","row-key":"date",data:e.paginatedNotifyData,style:{width:"100%"}},{default:u(()=>[t(d,{prop:"leave_user_id",label:"\u63D0\u4EA4\u7528\u6237id",width:"180",truncated:""}),t(d,{prop:"username",label:"\u63D0\u4EA4\u7528\u6237",width:"180",truncated:""}),t(d,{prop:"leave_submitted_at",label:"\u63D0\u4EA4\u65E5\u671F",sortable:"",width:"180","column-key":"leave_submitted_at"}),t(d,{prop:"leave_start_time",label:"\u5F00\u59CB\u65F6\u95F4",width:"180",truncated:""}),t(d,{prop:"leave_end_time",label:"\u7ED3\u675F\u65F6\u95F4",width:"180",truncated:""}),t(d,{prop:"leave_reason",label:"\u539F\u56E0",truncated:""}),t(d,{prop:"leave_status",label:"\u5904\u7406\u72B6\u6001",width:"100",filters:[{text:"\u5DF2\u901A\u8FC7",value:"\u5DF2\u901A\u8FC7"},{text:"\u672A\u901A\u8FC7",value:"\u672A\u901A\u8FC7"},{text:"\u672A\u5BA1\u6838",value:"\u672A\u5BA1\u6838"}],"filter-method":e.filterStatus,"filter-multiple":!0,"filtered-value":e.filters.status?[e.filters.status]:[],"filter-placement":"bottom-end"},{default:u(s=>[t(D,{type:s.row.leave_status==="\u5DF2\u901A\u8FC7"?"success":s.row.leave_status==="\u672A\u5BA1\u6838"?"primary":"danger","disable-transitions":""},{default:u(()=>[r(h(s.row.leave_status),1)]),_:2},1032,["type"])]),_:1},8,["filter-method","filtered-value"]),t(d,{align:"right"},{header:u(()=>[t(A,{modelValue:e.search,"onUpdate:modelValue":i[4]||(i[4]=s=>e.search=s),size:"small",placeholder:"\u641C\u7D22"},null,8,["modelValue"])]),default:u(s=>[t(v,{size:"small",onClick:w=>e.detailPop(s.row)},{default:u(()=>[Ye]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[V,e.loading],[$,e.isNotifyLeaveShow]]),t(L,{modelValue:e.modifyFormVisible,"onUpdate:modelValue":i[16]||(i[16]=s=>e.modifyFormVisible=s),title:"\u4FEE\u6539\u8BF7\u5047\u7533\u8BF7"},{default:u(()=>[t(S,{model:e.form},{default:u(()=>[t(m,{label:"\u8BF7\u5047\u8BB0\u5F55ID"},{default:u(()=>[t(A,{modelValue:e.form.leave_id,"onUpdate:modelValue":i[5]||(i[5]=s=>e.form.leave_id=s),disabled:""},null,8,["modelValue"])]),_:1}),t(m,{label:"\u63D0\u4EA4\u7528\u6237ID"},{default:u(()=>[t(A,{modelValue:e.form.leave_user_id,"onUpdate:modelValue":i[6]||(i[6]=s=>e.form.leave_user_id=s),disabled:""},null,8,["modelValue"])]),_:1}),t(m,{label:"\u63D0\u4EA4\u7528\u6237"},{default:u(()=>[t(A,{modelValue:e.form.username,"onUpdate:modelValue":i[7]||(i[7]=s=>e.form.username=s),disabled:""},null,8,["modelValue"])]),_:1}),t(m,{label:"\u5F00\u59CB\u65F6\u95F4"},{default:u(()=>[t(A,{modelValue:e.form.leave_start_time,"onUpdate:modelValue":i[8]||(i[8]=s=>e.form.leave_start_time=s),autocomplete:"on"},null,8,["modelValue"])]),_:1}),t(m,{label:"\u7ED3\u675F\u65F6\u95F4"},{default:u(()=>[t(A,{modelValue:e.form.leave_end_time,"onUpdate:modelValue":i[9]||(i[9]=s=>e.form.leave_end_time=s),autosize:"",type:"textarea"},null,8,["modelValue"])]),_:1}),t(m,{label:"\u8BF7\u5047\u7C7B\u578B"},{default:u(()=>[t(A,{modelValue:e.form.leave_type,"onUpdate:modelValue":i[10]||(i[10]=s=>e.form.leave_type=s)},null,8,["modelValue"])]),_:1}),t(m,{label:"\u8BF7\u5047\u539F\u56E0"},{default:u(()=>[t(A,{modelValue:e.form.leave_reason,"onUpdate:modelValue":i[11]||(i[11]=s=>e.form.leave_reason=s)},null,8,["modelValue"])]),_:1}),t(m,{label:"\u5904\u7406\u72B6\u6001"},{default:u(()=>[t(A,{modelValue:e.form.leave_status,"onUpdate:modelValue":i[12]||(i[12]=s=>e.form.leave_status=s)},null,8,["modelValue"])]),_:1}),t(m,{label:"\u63D0\u4EA4\u65E5\u671F"},{default:u(()=>[t(A,{modelValue:e.form.leave_submitted_at,"onUpdate:modelValue":i[13]||(i[13]=s=>e.form.leave_submitted_at=s),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),p("div",Ze,[t(v,{onClick:i[14]||(i[14]=s=>e.modifyFormVisible=!1)},{default:u(()=>[xe]),_:1}),t(v,{type:"primary",onClick:i[15]||(i[15]=s=>e.handleEdit())},{default:u(()=>[et]),_:1})])]),_:1},8,["modelValue"]),t(L,{modelValue:e.detailFormVisible,"onUpdate:modelValue":i[18]||(i[18]=s=>e.detailFormVisible=s),title:"\u5F85\u529E\u4E8B\u9879\u8BE6\u60C5"},{default:u(()=>[t(S,{model:e.form},{default:u(()=>[t(m,{label:"\u8BF7\u5047\u8BB0\u5F55ID\xA0\xA0"},{default:u(()=>[r(h(e.form.leave_id),1)]),_:1}),t(m,{label:"\u63D0\u4EA4\u7528\u6237ID\xA0\xA0"},{default:u(()=>[r(h(e.form.leave_user_id),1)]),_:1}),t(m,{label:"\u63D0\u4EA4\u7528\u6237\xA0\xA0"},{default:u(()=>[r(h(e.form.username),1)]),_:1}),t(m,{label:"\u5F00\u59CB\u65F6\u95F4\xA0\xA0"},{default:u(()=>[r(h(e.form.leave_start_time),1)]),_:1}),t(m,{label:"\u7ED3\u675F\u65F6\u95F4\xA0\xA0"},{default:u(()=>[r(h(e.form.leave_end_time),1)]),_:1}),t(m,{label:"\u8BF7\u5047\u7C7B\u578B\xA0\xA0"},{default:u(()=>[r(h(e.form.leave_type),1)]),_:1}),t(m,{label:"\u8BF7\u5047\u539F\u56E0\xA0\xA0"},{default:u(()=>[r(h(e.form.leave_reason),1)]),_:1}),t(m,{label:"\u5904\u7406\u72B6\u6001\xA0\xA0"},{default:u(()=>[r(h(e.form.leave_status),1)]),_:1}),t(m,{label:"\u63D0\u4EA4\u65E5\u671F\xA0\xA0"},{default:u(()=>[r(h(e.form.leave_submitted_at),1)]),_:1})]),_:1},8,["model"]),p("div",tt,[t(v,{type:"primary",onClick:i[17]||(i[17]=s=>e.detailFormVisible=!1)},{default:u(()=>[ut]),_:1})])]),_:1},8,["modelValue"]),t(L,{modelValue:e.statisticsVisible,"onUpdate:modelValue":i[20]||(i[20]=s=>e.statisticsVisible=s),title:"\u7EDF\u8BA1\u4FE1\u606F"},{default:u(()=>[t(B,{shadow:"hover",class:"card"},{default:u(()=>[p("p",null,[at,lt,p("span",null,h(e.getCurrentTableData().length),1)]),p("div",st,[p("div",ot,null,512)]),p("div",it,[p("p",null,[nt,p("span",null,h(e.statistics.pass),1)]),p("p",null,[rt,dt,p("span",null,h(e.statistics.unfin),1)]),p("p",null,[mt,ft,p("span",null,h(e.statistics.rej),1)])])]),_:1}),p("div",vt,[t(v,{type:"primary",onClick:i[19]||(i[19]=s=>e.statisticsVisible=!1)},{default:u(()=>[pt]),_:1})])]),_:1},8,["modelValue"]),t(M,{"current-page":e.currentPage,"page-sizes":[5,10,15,20,25],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.record_cnt,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])}var wt=Le($e,[["render",_t],["__scopeId","data-v-9b7d102a"]]);export{wt as default};
