!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(l){u=!0,o=l}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */l=function(){return t};var t={},n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(R){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),i=new S(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return I()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var u=x(i,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=d(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}t.wrap=c;var f={};function m(){}function p(){}function h(){}var v={};s(v,a,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(F([])));y&&y!==n&&r.call(y,a)&&(v=y);var b=h.prototype=m.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(t,n){function o(a,i,u,l){var s=d(t[a],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==e(f)&&r.call(f,"__await")?n.resolve(f.__await).then((function(e){o("next",e,u,l)}),(function(e){o("throw",e,u,l)})):n.resolve(f).then((function(e){c.value=e,u(c)}),(function(e){return o("throw",e,u,l)}))}l(s.arg)}var a;this._invoke=function(e,t){function r(){return new n((function(n,r){o(e,t,n,r)}))}return a=a?a.then(r,r):r()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=d(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function F(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=h,s(b,"constructor",h),s(h,"constructor",p),p.displayName=s(h,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},w(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new _(c(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(b),s(b,u,"Generator"),s(b,a,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=F,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:F(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function s(e,t,n,r,o,a,i){try{var u=e[a](i),l=u.value}catch(s){return void n(s)}u.done?t(l):Promise.resolve(l).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){s(a,r,o,i,u,"next",e)}function u(e){s(a,r,o,i,u,"throw",e)}i(void 0)}))}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=document.createElement("style");f.innerHTML=".btns[data-v-03baed25]{text-align:right}.el-transfer[data-v-03baed25]{display:inline-block;text-align:left}.transfer[data-v-03baed25]{text-align:center}.card-header[data-v-03baed25]{text-align:left}.btns[data-v-3b5db552]{text-align:right}.el-transfer[data-v-3b5db552]{display:inline-block;text-align:left}.transfer[data-v-3b5db552]{text-align:center}.card-header[data-v-3b5db552]{text-align:left}.chart-widget-list p[data-v-c543fde0]{border-bottom:1px solid #f1f3fa;margin-bottom:.5rem;padding-bottom:.5rem;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.icon-square[data-v-c543fde0]{width:12px;height:12px;display:inline-block}.red[data-v-c543fde0]{background-color:#ec6769}.green[data-v-c543fde0]{background-color:#93cb79}.yellow[data-v-c543fde0]{background-color:#f9c761}.deep-blue[data-v-c543fde0]{background-color:#5572c3}.FormInfo[data-v-6dc8a69a]{margin-top:20px}.FormInfo .demo-ruleForm[data-v-6dc8a69a]{text-align:left}.FormInfo .info[data-v-6dc8a69a]{text-align:left;padding-left:20px;margin-bottom:20px;font-size:12px}.FormInfo .card-header[data-v-6dc8a69a]{display:flex;justify-content:space-between;align-items:center}.FormInfo .text[data-v-6dc8a69a]{font-size:14px}.FormInfo .item[data-v-6dc8a69a]{margin-bottom:18px}.FormInfo .box-card[data-v-6dc8a69a]{width:100%}.FormInfo .el-row[data-v-6dc8a69a]{margin-bottom:20px}.FormInfo[data-v-04b5f9e3]{margin-top:20px}.FormInfo .demo-ruleForm[data-v-04b5f9e3]{text-align:left}.FormInfo .info[data-v-04b5f9e3]{text-align:left;padding-left:20px;margin-bottom:20px;font-size:12px}.FormInfo .card-header[data-v-04b5f9e3]{display:flex;justify-content:space-between;align-items:center}.FormInfo .text[data-v-04b5f9e3]{font-size:14px}.FormInfo .item[data-v-04b5f9e3]{margin-bottom:18px}.FormInfo .box-card[data-v-04b5f9e3]{width:100%}.FormInfo .el-row[data-v-04b5f9e3]{margin-bottom:20px}\n",document.head.appendChild(f),System.register(["./index-legacy.d40e4317.js","./vendor-legacy.2803936c.js"],(function(e){"use strict";var r,a,u,s,f,m,p,h,v,g,y,b,w,_,x,k,C,S,F,I,R,z,L,P,D,E,O,j,V,T,A,U,M,N,K,B,H,Y,G,W,q,Q,$,J,X,Z,ee,te,ne,re,oe;return{setters:[function(e){r=e.r,a=e.u,u=e._},function(e){s=e.e,f=e.R,m=e.k,p=e.B,h=e.c,v=e.C,g=e.D,y=e.E,b=e.m,w=e.aB,_=e.O,x=e.f,k=e.g,C=e.t,S=e.s,F=e.i,I=e.y,R=e.S,z=e.p,L=e.h,P=e.Q,D=e.q,E=e.aI,O=e.aJ,j=e.aK,V=e.aL,T=e.aM,A=e.aN,U=e.J,M=e.r,N=e.aq,K=e.F,B=e.v,H=e.n,Y=e.aQ,G=e.aT,W=e.az,q=e.aU,Q=e.j,$=e.aF,J=e.aO,X=e.aP,Z=e.aG,ee=e.aH,te=e.ax,ne=e.aR,re=e.w,oe=e.N}],execute:function(){var ae="http://127.0.0.1:8080/api",ie="/auth/permission/routes",ue="/admin/user/list",le="/admin/user/export",se="/admin/user/download",ce="/todolist/distributed_create",de="/meetings/distributed_create",fe="/admin/menu/update",me=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"postAuthPermission",value:function(e){return r({url:ae+ie,method:"POST",json:!0,data:e}).then((function(e){return 0===e.status?Promise.resolve(e):Promise.reject(e)}))}},{key:"postAdminQueryUserList",value:function(e){return r({url:ae+ue,method:"POST",json:!0,data:e}).then((function(e){return 0===e.status?Promise.resolve(e):Promise.reject(e)}))}},{key:"postAdminExportUser",value:function(e){return r({url:ae+le,method:"POST",responseType:"blob",json:!0,data:e}).then((function(e){if(e)if(e instanceof Blob){var t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.setAttribute("download","用户列表_"+(new Date).getTime()+".xls"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}else console.error("响应数据不是 Blob 类型")})).catch((function(e){throw console.error("Error downloading excel:",e),e}))}},{key:"postAdminPrintUser",value:function(e){return r({url:ae+se,method:"POST",responseType:"blob",json:!0,data:e}).then((function(e){if(e)if(e instanceof Blob){var t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.setAttribute("download","用户列表_"+(new Date).getTime()+".pdf"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}else console.error("响应数据不是 Blob 类型")})).catch((function(e){throw console.error("Error downloading pdf:",e),e}))}},{key:"postManagerDistributeTodo",value:function(e){return r({url:ae+ce,method:"POST",json:!0,data:e}).then((function(e){return 0===e.status?Promise.resolve(e):Promise.reject(e)}))}},{key:"postManagerDistributeMeeting",value:function(e){return r({url:ae+de,method:"POST",json:!0,data:e}).then((function(e){return 0===e.status?Promise.resolve(e):Promise.reject(e)}))}},{key:"postManagerUpdateMenu",value:function(e){return r({url:ae+fe,method:"POST",json:!0,data:e}).then((function(e){return 0===e.status?Promise.resolve(e):Promise.reject(e)}))}}],(n=null)&&d(t.prototype,n),o&&d(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),pe=s({name:"WorkersEdit",props:{currentRow:{type:Object,default:function(){return{userId:null,userName:"",userDepartment:"",userRole:""}}}},emits:["success"],setup:function(e,t){var n=t.emit,r=f(e,"currentRow"),u=a(),s=m((function(){return u.getters["settingsModule/getLangState"]})),d=p({url:"/worker/allow",purl:"/worker/permissions",loading:!1,form:{key:"",label:""},menu:{loading:!1,url:"/menu/list",data:[],form:[]}}),b=m((function(){return r.value})),w=m((function(){return u.state.permissionModule.routes})),_=function(){var e=c(l().mark((function e(){var t,n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={roleName:b.value.userRole},e.next=3,me.postAuthPermission(t);case 3:null!=(n=e.sent)&&n.data&&(r=n.data.authedRoutes,d.menu.form=r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw a}}}}(w.value);try{for(t.s();!(e=t.n()).done;){var n,r,o=e.value;if(null==o||null===(n=o.meta)||void 0===n||!n.hidden)d.menu.data.push({key:null==o?void 0:o.path,label:null==o||null===(r=o.meta)||void 0===r?void 0:r.title[s.value]})}}catch(a){t.e(a)}finally{t.f()}console.log(d.menu)},k=function(){var e=c(l().mark((function e(){var t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={authedRoutes:d.menu.form,userId:b.value.userId,accessToken:sessionStorage.getItem("accessToken")},console.log("form is ",t),e.next=4,me.postManagerUpdateMenu(t);case 4:0===(r=e.sent).status?(y({type:"success",message:r.message}),n("success")):y({type:"error",message:r.message});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return h((function(){x()})),v((function(){_()})),o(o({},g(d)),{},{lang:s,row:b,fetchMenuData:x,saveData:k})}}),he=function(e){return z("data-v-03baed25"),e=e(),L(),e},ve={class:"wrapper"},ge={class:"card-header"},ye={key:0},be=he((function(){return F("br",null,null,-1)})),we=he((function(){return F("i",{class:"fa fa-check"},null,-1)})),_e=P(" 确认修改 ");var xe=u(pe,[["render",function(e,t,n,r,o,a){var i=b("el-form-item"),u=b("el-form"),l=b("el-transfer"),s=b("el-card"),c=b("el-button"),d=b("el-row"),f=w("loading");return _((x(),k("div",ve,[C(s,{class:"transfer"},{header:S((function(){return[F("span",null,[F("div",ge,[C(u,{"label-position":"left",inline:"",class:"info-table"},{default:S((function(){return[C(i,{label:"用户名"},{default:S((function(){return[e.row&&e.row.userName?(x(),k("span",ye,I(e.row.userName),1)):R("",!0)]})),_:1})]})),_:1})])])]})),default:S((function(){return[_(C(l,{modelValue:e.menu.form,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.menu.form=t}),data:e.menu.data,titles:["菜单","已授权"]},null,8,["modelValue","data"]),[[f,e.menu.loading]])]})),_:1}),be,C(d,{class:"btns"},{default:S((function(){return[C(c,{size:"mini",type:"primary",onClick:e.saveData},{default:S((function(){return[we,_e]})),_:1},8,["onClick"])]})),_:1})])),[[f,e.loading]])}],["__scopeId","data-v-03baed25"]]),ke=s({name:"WorkerDetail",props:{currentRow:{type:Object,default:function(){return{userId:null,userName:"",userDepartment:"",userRole:"",userPhone:"",userAvatar:""}}}},setup:function(e){var t=f(e,"currentRow"),n=p({loading:!1,form:{userId:1,userName:"",userRole:"",userDepartment:"",userPhone:"",userEmail:"",userAvatar:""}}),r=[{value:"IT",label:"技术部"},{value:"Market",label:"市场部"},{value:"HR",label:"人力资源部"}],a=[{value:"admin",label:"管理员"},{value:"manager",label:"部门经理"},{value:"worker",label:"员工"}],i=m((function(){return t.value}));return o(o({},g(n)),{},{departments:r,roles:a,departmentLabel:function(e){var t=r.find((function(t){return t.value===e}));return t?t.label:"未知"},roleLabel:function(e){var t=a.find((function(t){return t.value===e}));return t?t.label:"未知"},row:i})}}),Ce={class:"new"},Se={style:{display:"flex","justify-content":"center","align-items":"center"}},Fe={key:1,style:{"text-align":"center"}};var Ie,Re=u(ke,[["render",function(e,t,n,r,o,a){var i=b("el-image"),u=b("el-descriptions-item"),l=b("el-descriptions"),s=w("loading");return _((x(),k("div",Ce,[F("div",Se,[e.row.userAvatar?(x(),D(i,{key:0,style:{width:"100px",height:"100px","border-radius":"50%"},src:e.row.userAvatar,fit:"cover",referrerPolicy:"no-referrer"},null,8,["src"])):(x(),k("div",Fe,"无头像"))]),C(l,{column:1,border:""},{default:S((function(){return[C(u,{label:"员工编号"},{default:S((function(){return[P(I(e.row.userId),1)]})),_:1}),C(u,{label:"名称"},{default:S((function(){return[P(I(e.row.userName),1)]})),_:1}),C(u,{label:"员工部门"},{default:S((function(){return[P(I(e.departmentLabel(e.row.userDepartment)),1)]})),_:1}),C(u,{label:"员工职位"},{default:S((function(){return[P(I(e.roleLabel(e.row.userRole)),1)]})),_:1}),C(u,{label:"邮箱"},{default:S((function(){return[P(I(e.row.userEmail),1)]})),_:1}),C(u,{label:"手机号码"},{default:S((function(){return[P(I(e.row.userPhone),1)]})),_:1})]})),_:1})])),[[s,e.loading]])}],["__scopeId","data-v-3b5db552"]]);E([O,j,V,T,A]);var ze=s({name:"WorkerStatistic",props:{data:{type:Array,default:function(){return[]}}},setup:function(e){var t=M(null),r=p({data:e.data||[],rolesCount:{}}),a={admin:"管理员",manager:"部门经理",worker:"员工"},i={"管理员":"icon-square red","部门经理":"icon-square green","员工":"icon-square deep-blue"},u=r.data.length,l=function(){r.data.forEach((function(e){var t=a[e.userRole]||e.userRole;t&&(r.rolesCount[t]?r.rolesCount[t]++:r.rolesCount[t]=1)}))},s=function(){var e=Object.entries(r.rolesCount).map((function(e){var t=n(e,2);return{name:t[0],value:t[1]}}));N((function(){var n,r,o;t.value?(n=t.value,r=e,o=U(n),(Ie={tooltip:{trigger:"item"},legend:{top:"2%",left:"center"},series:[{name:"总待办事项相关统计",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"20",fontWeight:"bold"}},labelLine:{show:!1},data:r}]})&&o.setOption(Ie)):console.log("refRolesChart not exist!")}))};return h((function(){l(),s()})),o(o({},g(r)),{},{getRoleIconClass:function(e){return i[e]||"icon-square"},displayChart:s,doStatistics:l,roleMapping:a,roleIconMapping:i,refRolesChart:t,totalPeople:u})}}),Le=function(e){return z("data-v-c543fde0"),e=e(),L(),e}((function(){return F("span",null,[F("i",{class:"icon-square red"}),P(" 总人数")],-1)})),Pe=P(),De={class:"role"},Ee={class:"e-chart",style:{height:"201px",width:"100%"}},Oe={ref:"refRolesChart",style:{width:"inherit",height:"inherit"}},je={class:"chart-widget-list"};var Ve=u(ze,[["render",function(e,t,n,r,o,a){var i=b("el-card");return x(),k("div",null,[C(i,{shadow:"hover",class:"card"},{default:S((function(){return[F("p",null,[Le,Pe,F("span",null,I(e.totalPeople),1)]),F("div",De,[F("div",Ee,[F("div",Oe,null,512)]),F("div",je,[(x(!0),k(K,null,B(e.rolesCount,(function(t,n){return x(),k("p",{key:n},[F("span",null,[F("i",{class:H(e.getRoleIconClass(n))},null,2),P(" "+I(n),1)]),F("span",null,I(t),1)])})),128))])])]})),_:1})])}],["__scopeId","data-v-c543fde0"]]),Te=s({name:"DistributeTodo",components:{Edit:Y,DeleteFilled:G,Check:W,ArrowLeft:q},props:{userIds:{type:Array,default:function(){return[]}}},emits:["success"],setup:function(e,t){var n=t.emit,r=Q(),o=p({todo_title:"",todo_ctnt:"",date1:"",date2:"",type:[]}),a=M();h((function(){console.log("show sizeFormRef.value",a.value)}));return{handleBack:function(){r.go(-1)},sizeForm:o,activityForm:a,submitForm:function(){a.value.validate(function(){var t=c(l().mark((function t(r){var a,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=6;break}return a={todo_title:o.todo_title,todo_ctnt:o.todo_ctnt,todo_ddl:"".concat(o.date1," ").concat(o.date2),user_ids:e.userIds,accessToken:sessionStorage.getItem("accessToken"),todo_fin:"未完成"},t.next=4,me.postManagerDistributeTodo(a);case 4:0===(i=t.sent).status?(y({type:"success",message:"分发待办事项成功"}),n("success")):y({type:"warning",message:i.message});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){a.value.resetFields()}}}}),Ae={class:"FormInfo"},Ue={class:"grid-content bg-purple-dark"},Me={style:{"text-align":"left"}},Ne=function(e){return z("data-v-6dc8a69a"),e=e(),L(),e}((function(){return F("span",null,"分发待办事项",-1)})),Ke=P("    "),Be=P("立即创建"),He=P("取消");var Ye=u(Te,[["render",function(e,t,n,r,o,a){var i=b("el-divider"),u=b("el-input"),l=b("el-form-item"),s=b("el-date-picker"),c=b("el-col"),d=b("el-time-picker"),f=b("el-button"),m=b("el-form"),p=b("el-card"),h=b("el-row");return x(),k("div",Ae,[C(h,null,{default:S((function(){return[C(c,{offset:1,span:22},{default:S((function(){return[F("div",Ue,[C(p,{class:"box-card"},{default:S((function(){return[F("div",Me,[Ne,C(i)]),C(m,{ref:"activityForm",style:{"text-align":"left"},model:e.sizeForm,"label-width":"80px",size:"mini"},{default:S((function(){return[C(l,{label:"标题"},{default:S((function(){return[C(u,{modelValue:e.sizeForm.todo_title,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.sizeForm.todo_title=t})},null,8,["modelValue"])]})),_:1}),C(l,{label:"内容"},{default:S((function(){return[C(u,{modelValue:e.sizeForm.todo_ctnt,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.sizeForm.todo_ctnt=t}),autosize:"",type:"textarea"},null,8,["modelValue"])]})),_:1}),C(l,{label:"截止时间"},{default:S((function(){return[F("div",null,[C(c,{span:11},{default:S((function(){return[C(s,{modelValue:e.sizeForm.date1,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.sizeForm.date1=t}),type:"date",placeholder:"选择日期",style:{width:"100%"},"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]})),_:1}),C(c,{class:"line",span:1},{default:S((function(){return[Ke]})),_:1}),C(c,{span:12},{default:S((function(){return[C(d,{modelValue:e.sizeForm.date2,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.sizeForm.date2=t}),placeholder:"选择时间",style:{width:"100%"},format:"HH:mm","value-format":"HH:mm"},null,8,["modelValue"])]})),_:1})])]})),_:1}),C(l,{size:"large"},{default:S((function(){return[C(f,{type:"primary",onClick:e.submitForm},{default:S((function(){return[Be]})),_:1},8,["onClick"]),C(f,null,{default:S((function(){return[He]})),_:1})]})),_:1})]})),_:1},8,["model"])]})),_:1})])]})),_:1})]})),_:1})])}],["__scopeId","data-v-6dc8a69a"]]),Ge=s({name:"DistributeTodo",components:{Edit:Y,DeleteFilled:G,Check:W,ArrowLeft:q},props:{userIds:{type:Array,default:function(){return[]}}},emits:["success"],setup:function(e,t){var n=t.emit,r=Q(),o=p({mtin_title:"",mtin_ctnt:"",mtin_loc:"",mtin_fin:null,mtin_len:"",date1:"",date2:"",type:[]}),a=M();h((function(){console.log("show sizeFormRef.value",a.value)}));return{handleBack:function(){r.go(-1)},sizeForm:o,activityForm:a,submitForm:function(){a.value.validate(function(){var t=c(l().mark((function t(r){var a,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=6;break}return a={mtin_title:o.mtin_title,mtin_ctnt:o.mtin_ctnt,mtin_st:"".concat(o.date1," ").concat(o.date2),mtin_loc:o.mtin_loc,mtin_len:o.mtin_len,mtin_fin:0,user_ids:e.userIds,accessToken:sessionStorage.getItem("accessToken")},t.next=4,me.postManagerDistributeMeeting(a);case 4:0===(i=t.sent).status?(y({type:"success",message:"分发会议成功"}),n("success")):y({type:"warning",message:i.message});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){a.value.resetFields()}}}}),We={class:"FormInfo"},qe={class:"grid-content bg-purple-dark"},Qe={style:{"text-align":"left"}},$e=function(e){return z("data-v-04b5f9e3"),e=e(),L(),e}((function(){return F("span",null,"新建会议",-1)})),Je=P("    "),Xe=P("立即创建"),Ze=P("取消");var et=s({name:"WorkerManage",components:{InfoFilled:$,Printer:J,Download:X,WorkerDetail:Re,WorkerEdit:xe,WorkerStatistic:Ve,DistributeTodo:Ye,DistributeMeeting:u(Ge,[["render",function(e,t,n,r,o,a){var i=b("el-divider"),u=b("el-input"),l=b("el-form-item"),s=b("el-date-picker"),c=b("el-col"),d=b("el-time-picker"),f=b("el-button"),m=b("el-form"),p=b("el-card"),h=b("el-row");return x(),k("div",We,[C(h,null,{default:S((function(){return[C(c,{offset:1,span:22},{default:S((function(){return[F("div",qe,[C(p,{class:"box-card"},{default:S((function(){return[F("div",Qe,[$e,C(i)]),C(m,{ref:"activityForm",style:{"text-align":"left"},model:e.sizeForm,"label-width":"80px",size:"mini"},{default:S((function(){return[C(l,{label:"标题"},{default:S((function(){return[C(u,{modelValue:e.sizeForm.mtin_title,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.sizeForm.mtin_title=t})},null,8,["modelValue"])]})),_:1}),C(l,{label:"内容"},{default:S((function(){return[C(u,{modelValue:e.sizeForm.mtin_ctnt,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.sizeForm.mtin_ctnt=t}),autosize:"",type:"textarea"},null,8,["modelValue"])]})),_:1}),C(l,{label:"地点"},{default:S((function(){return[C(u,{modelValue:e.sizeForm.mtin_loc,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.sizeForm.mtin_loc=t}),autosize:"",type:"textarea"},null,8,["modelValue"])]})),_:1}),C(l,{label:"持续时间"},{default:S((function(){return[C(u,{modelValue:e.sizeForm.mtin_len,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.sizeForm.mtin_len=t}),autosize:"",type:"textarea"},null,8,["modelValue"])]})),_:1}),C(l,{label:"截止时间"},{default:S((function(){return[F("div",null,[C(c,{span:11},{default:S((function(){return[C(s,{modelValue:e.sizeForm.date1,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.sizeForm.date1=t}),type:"date",placeholder:"选择日期",style:{width:"100%"},"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]})),_:1}),C(c,{class:"line",span:1},{default:S((function(){return[Je]})),_:1}),C(c,{span:12},{default:S((function(){return[C(d,{modelValue:e.sizeForm.date2,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.sizeForm.date2=t}),placeholder:"选择时间",style:{width:"100%"},format:"HH:mm","value-format":"HH:mm"},null,8,["modelValue"])]})),_:1})])]})),_:1}),C(l,{size:"large"},{default:S((function(){return[C(f,{type:"primary",onClick:e.submitForm},{default:S((function(){return[Xe]})),_:1},8,["onClick"]),C(f,null,{default:S((function(){return[Ze]})),_:1})]})),_:1})]})),_:1},8,["model"])]})),_:1})])]})),_:1})]})),_:1})])}],["__scopeId","data-v-04b5f9e3"]]),Edit:Y,Minus:Z,Plus:ee,Refresh:te,Odometer:ne},setup:function(){var e=p({url:{c:"/worker/add",r:"/worker/list",u:"/worker/update",d:"/worker/delete"},param:{total:0,size:10,page:1},data:[],filteredData:[],loading:!1,is_search:!1,edit_visible:!1,detail_visible:!1,todo_visible:!1,meeting_visible:!1,statistic_visible:!1,posted:{userRow:{userId:null,userName:"",userDepartment:"",userRole:"",userEmail:"",userPhone:"",userAvatar:""}},sortField:"",sortOrder:"",userIds:[],selectionRows:[],searchKeyword:""}),n=function(){return e.sortField?t(e.data).sort((function(t,n){var r=t[e.sortField],o=n[e.sortField];return r<o?"asc"===e.sortOrder?-1:1:r>o?"asc"===e.sortOrder?1:-1:0})):e.data},r=function(){var t=c(l().mark((function t(){var n,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.is_search=!1,n={accessToken:sessionStorage.getItem("accessToken")},t.next=4,me.postAdminQueryUserList(n);case 4:0===(r=t.sent).status&&(e.data=r.data.map((function(e){return o(o({},e),{},{isSelect:!1})})),e.userIds=r.data.map((function(e){return e.userId})),e.param.total=e.data.length);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=function(){return e.is_search?n().filter((function(t){return t.userName.toLowerCase().includes(e.searchKeyword.toLowerCase())||t.userRole.toLowerCase().includes(e.searchKeyword.toLowerCase())||t.userDepartment.toLowerCase().includes(e.searchKeyword.toLowerCase())||t.userPhone.toLowerCase().includes(e.searchKeyword.toLowerCase())})).slice((e.param.page-1)*e.param.size,e.param.page*e.param.size):n().slice((e.param.page-1)*e.param.size,e.param.page*e.param.size)},i=function(){""!=e.searchKeyword?(e.is_search=!0,e.param.page=1,e.filteredData=e.data.filter((function(t){return t.userName.toLowerCase().includes(e.searchKeyword.toLowerCase())||t.userRole.toLowerCase().includes(e.searchKeyword.toLowerCase())||t.userDepartment.toLowerCase().includes(e.searchKeyword.toLowerCase())||t.userPhone.toLowerCase().includes(e.searchKeyword.toLowerCase())})),e.param.total=e.filteredData.length):(e.is_search=!1,e.param.page=1,e.param.total=e.data.length)},u=function(){var t=c(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:oe.confirm("确定要导出为Excel吗","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(c(l().mark((function t(){var n,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.selectionRows.length>0?e.selectionRows:e.userIds,r={accessToken:sessionStorage.getItem("accessToken"),user_ids:n},me.postAdminExportUser(r).then((function(){y({type:"success",message:"Excel 文件正在下载..."})})).catch((function(){y({type:"error",message:"下载失败，请重试"})}));case 3:case"end":return t.stop()}}),t)})))).catch((function(){y({type:"info",message:"已取消"})}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var t=c(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:oe.confirm("确定要下载PDF吗","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(c(l().mark((function t(){var n,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.selectionRows.length>0?e.selectionRows:e.userIds,r={accessToken:sessionStorage.getItem("accessToken"),user_ids:n},me.postAdminPrintUser(r).then((function(){y({type:"success",message:"PDF 文件正在下载..."})})).catch((function(){y({type:"error",message:"下载失败，请重试"})}));case 3:case"end":return t.stop()}}),t)})))).catch((function(){y({type:"info",message:"已取消"})}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),d=function(){var t=c(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.statistic_visible=!0;case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return re((function(){return e.searchKeyword}),(function(e){i()})),h((function(){r(),a()})),o(o({},g(e)),{},{displayData:a,handleSelectionChange:function(t){e.selectionRows=t.map((function(e){return e.userId})),console.log("SelectionRows",e.selectionRows)},onCurrentChange:function(t){e.param.page=t},onSizeChange:function(t){e.param.page=1,e.param.size=t},onDistributeTodo:function(){e.todo_visible=!0},onDistributeTodoSuccess:function(){e.todo_visible=!1},onDistributeMeeting:function(){e.meeting_visible=!0},onDistributeMeetingSuccess:function(){e.meeting_visible=!1},onDetail:function(t,n){console.log("row",n),e.posted.userRow.userId=n.userId,e.posted.userRow.userName=n.userName,e.posted.userRow.userRole=n.userRole,e.posted.userRow.userDepartment=n.userDepartment,e.posted.userRow.userEmail=n.userEmail,e.posted.userRow.userPhone=n.userPhone,e.posted.userRow.userAvatar=n.userAvatar,e.detail_visible=!0},onEdit:function(t,n){console.log("row",n),e.posted.userRow.userId=n.userId,e.posted.userRow.userName=n.userName,e.posted.userRow.userRole=n.userRole,e.posted.userRow.userDepartment=n.userDepartment,e.edit_visible=!0},onEditSuccess:function(){e.edit_visible=!1,r()},onSearch:i,onExport:u,onPrint:s,onStatistic:d,fetchData:r,handleSortChange:function(t){var n=t.prop,r=t.order;e.sortField=n,e.sortOrder="ascending"===r?"asc":"desc"}})}}),tt=P("分派任务"),nt=P("新建会议"),rt=P("导出列表"),ot=P("打印列表"),at=P("统计信息"),it=F("br",null,null,-1),ut={class:"pagination"};e("default",u(et,[["render",function(e,t,n,r,o,a){var i=b("plus"),u=b("el-icon"),l=b("el-button"),s=b("download"),c=b("printer"),d=b("odometer"),f=b("el-col"),m=b("el-input"),p=b("el-row"),h=b("el-table-column"),v=b("InfoFilled"),g=b("el-tooltip"),y=b("edit"),I=b("el-table"),R=b("el-pagination"),z=b("el-card"),L=b("worker-detail"),P=b("el-dialog"),E=b("worker-statistic"),O=b("worker-edit"),j=b("distribute-todo"),V=b("distribute-meeting"),T=w("loading");return x(),k("div",null,[C(z,{class:"card-ctrl"},{default:S((function(){return[C(p,null,{default:S((function(){return[C(f,{span:20,style:{"text-align":"left"}},{default:S((function(){return[C(l,{type:"primary",size:"medium",onClick:e.onDistributeTodo},{default:S((function(){return[C(u,null,{default:S((function(){return[C(i)]})),_:1}),tt]})),_:1},8,["onClick"]),C(l,{type:"success",size:"medium",onClick:e.onDistributeMeeting},{default:S((function(){return[C(u,null,{default:S((function(){return[C(i)]})),_:1}),nt]})),_:1},8,["onClick"]),C(l,{type:"info",size:"medium",onClick:e.onExport},{default:S((function(){return[C(u,null,{default:S((function(){return[C(s)]})),_:1}),rt]})),_:1},8,["onClick"]),C(l,{type:"info",size:"medium",onClick:e.onPrint},{default:S((function(){return[C(u,null,{default:S((function(){return[C(c)]})),_:1}),ot]})),_:1},8,["onClick"]),C(l,{type:"success",size:"medium",onClick:e.onStatistic},{default:S((function(){return[C(u,null,{default:S((function(){return[C(d)]})),_:1}),at]})),_:1},8,["onClick"])]})),_:1}),C(f,{span:4,style:{"text-align":"right"}},{default:S((function(){return[C(m,{modelValue:e.searchKeyword,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.searchKeyword=t}),placeholder:"请输入关键词",style:{width:"200px","margin-right":"10px"}},null,8,["modelValue"])]})),_:1})]})),_:1}),it,_((x(),D(I,{data:e.displayData(),stripe:"",class:"table",onSelectionChange:e.handleSelectionChange},{default:S((function(){return[C(h,{type:"selection",width:"55",align:"center",sortable:"",onSortChange:e.handleSortChange},null,8,["onSortChange"]),C(h,{prop:"userName",label:"用户名",align:"center",sortable:"",onSortChange:e.handleSortChange},null,8,["onSortChange"]),C(h,{prop:"userDepartment",label:"部门",align:"center",sortable:"",onSortChange:e.handleSortChange},null,8,["onSortChange"]),C(h,{prop:"userRole",label:"职位",align:"center",sortable:"",onSortChange:e.handleSortChange},null,8,["onSortChange"]),C(h,{prop:"userPhone",label:"电话号码",align:"center",sortable:"",onSortChange:e.handleSortChange},null,8,["onSortChange"]),C(h,{label:"操作",align:"center"},{default:S((function(t){return[C(g,{class:"item",effect:"dark",content:"详情",placement:"bottom"},{default:S((function(){return[C(l,{circle:"",plain:"",type:"info",size:"small",onClick:function(n){return e.onDetail(t.$index,t.row)}},{default:S((function(){return[C(u,null,{default:S((function(){return[C(v)]})),_:1})]})),_:2},1032,["onClick"])]})),_:2},1024),C(g,{class:"item",effect:"dark",content:"菜单授权",placement:"bottom"},{default:S((function(){return[C(l,{circle:"",plain:"",type:"primary",size:"small",onClick:function(n){return e.onEdit(t.$index,t.row)}},{default:S((function(){return[C(u,null,{default:S((function(){return[C(y)]})),_:1})]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:1})]})),_:1},8,["data","onSelectionChange"])),[[T,e.loading]]),F("div",ut,[C(R,{"current-page":e.param.page,"page-size":e.param.size,layout:"sizes,prev,pager,next,total","page-sizes":[10,20,50],total:e.param.total,background:"",onCurrentChange:e.onCurrentChange,onSizeChange:e.onSizeChange},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])])]})),_:1}),C(P,{modelValue:e.detail_visible,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.detail_visible=t}),center:"",title:"员工信息详情"},{default:S((function(){return[C(L,{"current-row":e.posted.userRow},null,8,["current-row"])]})),_:1},8,["modelValue"]),C(P,{modelValue:e.statistic_visible,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.statistic_visible=t}),center:"",title:"统计信息"},{default:S((function(){return[C(E,{data:e.data},null,8,["data"])]})),_:1},8,["modelValue"]),C(P,{modelValue:e.edit_visible,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.edit_visible=t}),center:"",title:e.posted.userRow.userRole},{default:S((function(){return[C(O,{"current-row":e.posted.userRow,onSuccess:e.onEditSuccess},null,8,["current-row","onSuccess"])]})),_:1},8,["modelValue","title"]),C(P,{modelValue:e.todo_visible,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.todo_visible=t}),center:"",title:e.posted.userRow.userRole},{default:S((function(){return[C(j,{userIds:e.selectionRows,onSuccess:e.onDistributeTodoSuccess},null,8,["userIds","onSuccess"])]})),_:1},8,["modelValue","title"]),C(P,{modelValue:e.meeting_visible,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.meeting_visible=t}),center:"",title:e.posted.userRow.userRole},{default:S((function(){return[C(V,{userIds:e.selectionRows,onSuccess:e.onDistributeMeetingSuccess},null,8,["userIds","onSuccess"])]})),_:1},8,["modelValue","title"])])}]]))}}}))}();
