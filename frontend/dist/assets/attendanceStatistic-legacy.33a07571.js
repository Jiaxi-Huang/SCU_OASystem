!function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?e(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);c=!0);}catch(u){i=!0,o=u}finally{try{c||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=document.createElement("style");c.innerHTML=".chart-widget-list p[data-v-3811f0be]{border-bottom:1px solid #f1f3fa;margin-bottom:.5rem;padding-bottom:.5rem;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.icon-square[data-v-3811f0be]{width:12px;height:12px;display:inline-block}.red[data-v-3811f0be]{background-color:#ec6769}.green[data-v-3811f0be]{background-color:#93cb79}.yellow[data-v-3811f0be]{background-color:#f9c761}.deep-blue[data-v-3811f0be]{background-color:#5572c3}\n",document.head.appendChild(c),System.register(["./index-legacy.ec536723.js","./vendor-legacy.2803936c.js"],(function(e){"use strict";var n,o,c,i,u,l,s,d,f,p,b,h,m,v,y,g,w,j,O,P,A,k,S,C,T,x,E,D,I,R;return{setters:[function(e){n=e.r,o=e._},function(e){c=e.E,i=e.aY,u=e.aI,l=e.aJ,s=e.aK,d=e.aL,f=e.aM,p=e.aN,b=e.J,h=e.e,m=e.r,v=e.B,y=e.c,g=e.D,w=e.aq,j=e.m,O=e.f,P=e.g,A=e.t,k=e.s,S=e.i,C=e.y,T=e.F,x=e.v,E=e.n,D=e.Q,I=e.p,R=e.h}],execute:function(){var L,q="http://127.0.0.1:8080/api",M="/attendance/loadAttendance",_="/attendance/addAttendance",B="/attendance/delAttendance",U="/attendance/editAttendance",Y="/attendance/personalAttendance",J="/attendance/checkInAttendance",W="/attendance/checkOutAttendance",z="/attendance/exportAttendance",F="/attendance/printAttendance";e("S",function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,o=[{key:"postAttendanceList",value:function(e){var t=i(e).format("YYYY-MM-DD");return n({url:"".concat(q+M,"?pickDate=").concat(t),method:"POST",json:!0}).then((function(e){if(0===e.status)return e}))}},{key:"postAddAttendance",value:function(e){return n({url:q+_,method:"POST",json:!0,data:e}).then((function(e){return 0===e.status?Promise.resolve(e):(-2===e.status&&c.error("未找到该用户"),Promise.reject(e))}))}},{key:"postDeleteAttendance",value:function(e){return n({url:"".concat(q+B,"?id=").concat(e),method:"POST",json:!0,id:e}).then((function(e){return 0===e.status?Promise.resolve(e):Promise.reject(e)}))}},{key:"postEditAttendance",value:function(e){return n({url:q+U,method:"POST",json:!0,data:e}).then((function(e){return 0===e.status?Promise.resolve(e):Promise.reject(e)}))}},{key:"postPersonalAttendance",value:function(e){return n({url:"".concat(q+Y,"?accessToken=").concat(e.accessToken),method:"POST",json:!0}).then((function(e){return 0===e.status?Promise.resolve(e):Promise.reject(e)}))}},{key:"postCheckInAttendance",value:function(e){return n({url:q+J,method:"POST",json:!0,data:e}).then((function(e){return 0===e.status||-1===e.status?Promise.resolve(e):Promise.reject(e)}))}},{key:"postCheckOutAttendance",value:function(e){return n({url:q+W,method:"POST",json:!0,data:e}).then((function(e){return 0===e.status||-1===e.status||-2===e.status?Promise.resolve(e):Promise.reject(e)}))}},{key:"postAdminExportAttendance",value:function(e){return n({url:q+z,method:"POST",responseType:"blob",json:!0,data:e}).then((function(e){if(e)if(e instanceof Blob){var t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.setAttribute("download","考勤列表_"+(new Date).getTime()+".xls"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}else console.error("响应数据不是 Blob 类型")})).catch((function(e){throw console.error("Error downloading excel:",e),e}))}},{key:"postAdminPrintAttendance",value:function(e){return n({url:q+F,method:"POST",responseType:"blob",json:!0,data:e}).then((function(e){if(e)if(e instanceof Blob){var t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.setAttribute("download","考勤列表_"+(new Date).getTime()+".pdf"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}else console.error("响应数据不是 Blob 类型")})).catch((function(e){throw console.error("Error downloading pdf:",e),e}))}}],(r=null)&&a(t.prototype,r),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()),u([l,s,d,f,p]);var H=h({name:"RoleStatistic",props:{data:{type:Array,default:function(){return[]}}},setup:function(e){var n=m(null),o=v({data:e.data||[],rolesCount:{}}),a={},c={"管理员":"icon-square red","部门经理":"icon-square green","员工":"icon-square deep-blue"},i=o.data.length,u=function(){o.data.forEach((function(e){var t=a[e.status]||e.status;t&&(o.rolesCount[t]?o.rolesCount[t]++:o.rolesCount[t]=1)}))},l=function(){var e=Object.entries(o.rolesCount).map((function(e){var t=r(e,2);return{name:t[0],value:t[1]}}));w((function(){var t,r,o;n.value&&(t=n.value,r=e,o=b(t),(L={tooltip:{trigger:"item"},legend:{top:"2%",left:"center"},series:[{type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"20",fontWeight:"bold"}},labelLine:{show:!1},data:r}]})&&o.setOption(L))}))};return y((function(){u(),l()})),t(t({},g(o)),{},{getRoleIconClass:function(e){return c[e]||"icon-square"},displayChart:l,doStatistics:u,roleMapping:a,roleIconMapping:c,refRolesChart:n,totalPeople:i})}}),K=function(e){return I("data-v-3811f0be"),e=e(),R(),e},N=K((function(){return S("span",null,[S("i",{class:"icon-square red"}),D(" 总人数")],-1)})),Q=D(),$={class:"status"},G=K((function(){return S("h3",null,"按考勤统计",-1)})),V={class:"e-chart",style:{height:"201px",width:"100%"}},X={ref:"refRolesChart",style:{width:"inherit",height:"inherit"}},Z={class:"chart-widget-list"};e("A",o(H,[["render",function(e,t,n,r,o,a){var c=j("el-card");return O(),P("div",null,[A(c,{shadow:"hover",class:"card"},{default:k((function(){return[S("p",null,[N,Q,S("span",null,C(e.totalPeople),1)]),S("div",$,[G,S("div",V,[S("div",X,null,512)]),S("div",Z,[(O(!0),P(T,null,x(e.rolesCount,(function(t,n){return O(),P("p",{key:n},[S("span",null,[S("i",{class:E(e.getRoleIconClass(n))},null,2),D(" "+C(n),1)]),S("span",null,C(t),1)])})),128))])])]})),_:1})])}],["__scopeId","data-v-3811f0be"]]))}}}))}();
