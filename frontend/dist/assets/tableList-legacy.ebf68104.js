!function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function t(t){for(var o=1;o<arguments.length;o++){var l=null!=arguments[o]?arguments[o]:{};o%2?e(Object(l),!0).forEach((function(e){n(t,e,l[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):e(Object(l)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(l,e))}))}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=document.createElement("style");o.innerHTML=".table-container .form-inline[data-v-6ee06f3b]{margin:15px;text-align:left}.table-container .table-list[data-v-6ee06f3b]{margin:15px}.chart-widget-list p[data-v-6ee06f3b]{border-bottom:1px solid #f1f3fa;margin-bottom:.5rem;padding-bottom:.5rem;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.icon-square[data-v-6ee06f3b]{width:12px;height:12px;display:inline-block}.red[data-v-6ee06f3b]{background-color:#ec6769}.green[data-v-6ee06f3b]{background-color:#93cb79}.yellow[data-v-6ee06f3b]{background-color:#f9c761}.deep-blue[data-v-6ee06f3b]{background-color:#5572c3}\n",document.head.appendChild(o),System.register(["./vendor-legacy.2803936c.js","./index-legacy.ec536723.js"],(function(e){"use strict";var n,o,l,r,i,a,u,d,c,f,s,m,p,h,b,_,g,y,w,v,V,C,S,D,k,x,O,L,P,I,F,T,z,E,j,W,U,R;return{setters:[function(e){n=e.aI,o=e.aJ,l=e.aK,r=e.aL,i=e.aM,a=e.aN,u=e.J,d=e.e,c=e.aR,f=e.ax,s=e.aP,m=e.aS,p=e.ay,h=e.j,b=e.r,_=e.B,g=e.c,y=e.E,w=e.w,v=e.D,V=e.m,C=e.f,S=e.g,D=e.t,k=e.s,x=e.Q,O=e.y,L=e.i,P=e.F,I=e.v,F=e.q,T=e.N,z=e.aq,E=e.p,j=e.h},function(e){W=e._,U=e.p,R=e.S}],execute:function(){var H;n([o,l,r,i,a]);var M=d({name:"todoTableList",computed:{Odometer:function(){return c},Refresh:function(){return f},Download:function(){return s},Delete:function(){return m},CirclePlus:function(){return p}},directives:{permission:U},setup:function(){var e=h(),n=b(null),o=b(null),l=_({tableData:[{todo_ddl:"后台沒打开",todo_title:"后台沒打开",todo_fin:"后台沒打开",todo_ctnt:"NO"}],currentPage:1,pageSize:5,search:"",modifyFormVisible:!1,detailFormVisible:!1,form:{},paginatedData:[],record_cnt:0,fin_options:[{value:"未完成",text:"未完成"},{value:"已完成",text:"已完成"}],filters:{todo_fin:[]},selectionRows:[],search_field:"none",search_key:"",statisticsVisible:!1,statistics:{}}),r=_({user:"",region:""});g((function(){a(),d(),c()}));var i=_({todo_title:[{required:!0,message:"标题不能为空",trigger:"change"},{validator:function(e,t,n){t.length>20?n(new Error("标题不能超过20个字")):n()},trigger:"blur"}],todo_ctnt:[{required:!0,message:"内容不能为空",trigger:"blur"},{validator:function(e,t,n){t.length>120?n(new Error("内容不能超过120个字")):n()},trigger:"blur"}]}),a=function(){var e=sessionStorage.getItem("TODOLIST_PAGE_SIZE");e?l.pageSize=parseInt(e,10):(sessionStorage.setItem("TODOLIST_PAGE_SIZE",5),l.pageSize=5)},d=function(){"1"===sessionStorage.getItem("showUncompleted")&&(l.filters.todo_fin[0]="未完成",sessionStorage.setItem("showUncompleted",0))},c=function(){try{R.postGetTodoList().then((function(e){if(e){l.tableData=[];var t=e.data;l.record_cnt=t.length,l.tableData=t,f()}}))}catch(e){y({type:"warning",message:e.message})}},f=function(){var e=l.tableData;l.search&&(e=e.filter((function(e){return e.todo_title.toLowerCase().includes(l.search.toLowerCase())}))),l.filters.todo_fin[0]&&""!==l.filters.todo_fin[0]&&(e=e.filter((function(e){return e.todo_fin==l.filters.todo_fin[0]})));var t=(l.currentPage-1)*l.pageSize,n=l.currentPage*l.pageSize;l.paginatedData=e.slice(t,n),l.record_cnt=e.length},s=function(){f()};w((function(){return l.search}),s);var m=b();return t(t({formInline:r,total:1},v(l)),{},{handleCurrentChange:function(e){l.currentPage=e,f()},handleSizeChange:function(e){l.pageSize=e,sessionStorage.setItem("TODOLIST_PAGE_SIZE",e),f()},onSubmit:function(){},onAddTodo:function(){e.replace("/todoList/todoAdd")},handleEdit:function(){m.value.validate((function(e){if(!e)return y({type:"error",message:"请检查您的输入！"}),!1;l.modifyFormVisible=!1;var t=l.form;t.todo_ddl=[t.ddl_date,t.ddl_time].join(" "),t.todo_crt=[t.crt_date,t.crt_time].join(" "),l.form={};try{R.postModifyTodo(t).then((function(e){}))}catch(n){y({type:"error",message:n.message})}}))},handleDelete:function(e,t){var n={todo_id:t.todo_id};try{R.deleteTodo(n).then((function(e){e&&c()}))}catch(o){y({type:"warning",message:o.message})}l.tableData.splice(e,1)},filterTableRef:n,refAverageSales:o,resetDateFilter:function(){n.value.clearFilter("date")},clearFilter:function(){n.value.clearFilter()},formatter:function(e){return e.address},filterTag:function(e,t){return t.tag===e},handleFilterChange:function(e){l.filters.todo_fin=e.todo_fin,f()},filterHandler:function(e,t,n){return t[n.property]===e},modifyPop:function(e){l.form=e,l.form.ddl_date=e.todo_ddl.split(" ")[0],l.form.ddl_time=e.todo_ddl.split(" ")[1],l.form.crt_date=e.todo_crt.split(" ")[0],l.form.crt_time=e.todo_crt.split(" ")[1],l.modifyFormVisible=!0},detailPop:function(e){l.detailFormVisible=!0,l.form=e},watchSearch:s,page_size_get_set:a,filterPresetTest:d,handleSelectionChange:function(e){l.selectionRows=e.map((function(e){return e.todo_id}))},onDeleteMulti:function(){try{R.deleteMulti(l.selectionRows).then((function(e){e&&(c(),y({type:"success",message:" 成功删除"}))}))}catch(e){y({type:"warning",message:e.message})}},onDownload:function(){T.confirm("确定要打印为PDF吗","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then((function(){R.getPDF().then((function(){y({type:"success",message:"PDF 文件正在下载..."})})).catch((function(){y({type:"error",message:"下载失败，请重试"})}))})).catch((function(){y({type:"info",message:"已取消"})}))},onToExcel:function(){T.confirm("确定要导出为Excel吗","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then((function(){R.getExcel().then((function(){y({type:"success",message:"Excel 文件正在下载..."})})).catch((function(){y({type:"error",message:"下载失败，请重试"})}))})).catch((function(){y({type:"info",message:"已取消"})}))},onSearchSubmit:function(){var e={field:l.search_field,key:l.search_key.toString().trim()};if("none"!==e.field)if(""!==e.key)try{R.searchBy(e).then((function(e){if(0===e.status){y({type:"success",message:"搜索结果已返回"});var t=e.data;l.record_cnt=t.length,l.tableData=t,f()}else 1===e.status&&y({type:"warning",message:"没有找到符合条件的待办事项"})}))}catch(t){y({type:"warning",message:t.message})}else y({type:"warning",message:"没有输入搜索内容"});else y({type:"warning",message:"没有选择条件"})},onRefresh:function(){c()},onShowStatistics:function(){l.statisticsVisible=!0;var e=0,t=0;l.tableData.forEach((function(n){"未完成"==n.todo_fin?++e:++t})),l.statistics.fin=e,l.statistics.unfin=t;var n=[{name:"已完成",value:e},{name:"未完成",value:t}];z((function(){var e,t,l;o.value&&(e=o.value,t=n,l=u(e),(H={tooltip:{trigger:"item"},legend:{top:"2%",left:"center"},series:[{name:"总待办事项相关统计",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"20",fontWeight:"bold"}},labelLine:{show:!1},data:t}]})&&l.setOption(H))}))},rules:i,activityForm:m})}}),q=function(e){return E("data-v-6ee06f3b"),e=e(),j(),e},A={class:"table-container"},Y=x("添加待办事项"),B=x("批量删除待办事项"),G=x("打印"),N=x("导出"),Z=x("统计信息"),J=x("查询"),K=x("修改"),Q=x("查看详情"),$=x("删除"),X=x("    "),ee=x("    "),te={slot:"footer",class:"dialog-footer"},ne=x("取 消"),oe=x("确 定"),le={slot:"footer",class:"dialog-footer"},re=x("确 定"),ie=q((function(){return L("span",null,[L("i",{class:"icon-square red"}),x(" 总事项数 ")],-1)})),ae=x(),ue={class:"e-chart",style:{height:"201px",width:"100%"}},de={ref:"refAverageSales",style:{width:"inherit",height:"inherit"}},ce={class:"chart-widget-list"},fe=q((function(){return L("span",null,[L("i",{class:"icon-square green"}),x(" 未完成")],-1)})),se=q((function(){return L("span",null,[L("i",{class:"icon-square deep-blue"}),x(" 已完成 ")],-1)})),me=x(),pe={slot:"footer",class:"dialog-footer"},he=x("确认");e("default",W(M,[["render",function(e,t,n,o,l,r){var i=V("el-button"),a=V("el-form-item"),u=V("el-popconfirm"),d=V("el-form"),c=V("el-option"),f=V("el-select"),s=V("el-input"),m=V("el-table-column"),p=V("el-tag"),h=V("el-table"),b=V("el-date-picker"),_=V("el-col"),g=V("el-time-picker"),y=V("el-text"),w=V("el-dialog"),v=V("el-card"),T=V("el-pagination");return C(),S("div",A,[D(d,{inline:!0,model:e.formInline,class:"form-inline"},{default:k((function(){return[D(a,null,{default:k((function(){return[D(i,{type:"primary",onClick:e.onAddTodo,icon:e.CirclePlus},{default:k((function(){return[Y]})),_:1},8,["onClick","icon"])]})),_:1}),D(a,null,{default:k((function(){return[D(u,{"confirm-button-text":"确定","cancel-button-text":"取消","icon-color":"red",title:"确定删除该条记录吗？",onConfirm:e.onDeleteMulti},{reference:k((function(){return[D(i,{type:"danger",icon:e.Delete},{default:k((function(){return[B]})),_:1},8,["icon"])]})),_:1},8,["onConfirm"])]})),_:1}),D(a,null,{default:k((function(){return[D(i,{type:"primary",onClick:e.onDownload,icon:e.Download},{default:k((function(){return[G]})),_:1},8,["onClick","icon"])]})),_:1}),D(a,null,{default:k((function(){return[D(i,{type:"primary",onClick:e.onToExcel,icon:e.Download},{default:k((function(){return[N]})),_:1},8,["onClick","icon"])]})),_:1}),D(a,null,{default:k((function(){return[D(i,{type:"primary",onClick:t[0]||(t[0]=function(t){return e.onShowStatistics()}),icon:e.Odometer},{default:k((function(){return[Z]})),_:1},8,["icon"])]})),_:1})]})),_:1},8,["model"]),D(d,{inline:!0,model:e.formInline,class:"form-inline"},{default:k((function(){return[D(a,{label:"按",style:{width:"180px"}},{default:k((function(){return[D(f,{modelValue:e.search_field,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.search_field=t}),placeholder:"无",style:{width:"180px"}},{default:k((function(){return[D(c,{label:"无",value:"none"}),D(c,{label:"待办事项名称",value:"todo_title"}),D(c,{label:"待办事项内容",value:"todo_ctnt"}),D(c,{label:"待办事项ID",value:"todo_id"}),D(c,{label:"待办事项截止",value:"todo_ddl"})]})),_:1},8,["modelValue"])]})),_:1}),D(a,null,{default:k((function(){return[D(s,{modelValue:e.search_key,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.search_key=t}),placeholder:"全局搜索"},null,8,["modelValue"])]})),_:1}),D(a,null,{default:k((function(){return[D(i,{type:"primary",onClick:e.onSearchSubmit},{default:k((function(){return[J]})),_:1},8,["onClick"])]})),_:1}),D(a,null,{default:k((function(){return[D(i,{type:"primary",onClick:e.onRefresh,icon:e.Refresh},null,8,["onClick","icon"])]})),_:1})]})),_:1},8,["model"]),D(h,{ref:"filterTableRef",class:"table-list","row-key":"todo_id",data:e.paginatedData,style:{width:"100%"},onFilterChange:e.handleFilterChange,onSelectionChange:e.handleSelectionChange},{default:k((function(){return[D(m,{type:"selection",width:"55",align:"center"}),D(m,{prop:"todo_ddl",label:"截止日期",sortable:"",width:"180","column-key":"todo_ddl"}),D(m,{prop:"todo_title",label:"待办事项标题",width:"180",truncated:""}),D(m,{prop:"todo_ctnt",label:"待办事项内容",truncated:""}),D(m,{align:"right"},{header:k((function(){return[D(s,{modelValue:e.search,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.search=t}),size:"mini",placeholder:"按标题快速搜索",onInput:e.watchSearch},null,8,["modelValue","onInput"])]})),default:k((function(t){return[D(i,{size:"mini",onClick:function(n){return e.modifyPop(t.row)}},{default:k((function(){return[K]})),_:2},1032,["onClick"]),D(i,{size:"mini",onClick:function(n){return e.detailPop(t.row)}},{default:k((function(){return[Q]})),_:2},1032,["onClick"]),D(u,{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定删除该条记录吗？",onConfirm:function(n){return e.handleDelete(t.$index,t.row)}},{reference:k((function(){return[D(i,{size:"mini",type:"danger"},{default:k((function(){return[$]})),_:1})]})),_:2},1032,["onConfirm"])]})),_:1}),D(m,{prop:"todo_fin","column-key":"todo_fin",label:"状态",width:"100",filters:e.fin_options,"filtered-value":e.filters.todo_fin,"filter-multiple":!1,"filter-placement":"bottom-end"},{default:k((function(e){return[D(p,{type:"已完成"===e.row.todo_fin?"primary":"success","disable-transitions":""},{default:k((function(){return[x(O(e.row.todo_fin),1)]})),_:2},1032,["type"])]})),_:1},8,["filters","filtered-value"])]})),_:1},8,["data","onFilterChange","onSelectionChange"]),D(w,{modelValue:e.modifyFormVisible,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.modifyFormVisible=t}),title:"修改待办事项"},{default:k((function(){return[D(d,{model:e.form,ref:"activityForm",rules:e.rules},{default:k((function(){return[D(a,{label:"标题","label-width":e.formLabelWidth,prop:"todo_title"},{default:k((function(){return[D(s,{modelValue:e.form.todo_title,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.todo_title=t}),autocomplete:"on"},null,8,["modelValue"])]})),_:1},8,["label-width"]),D(a,{label:"内容","label-width":e.formLabelWidth,prop:"todo_ctnt"},{default:k((function(){return[D(s,{modelValue:e.form.todo_ctnt,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.todo_ctnt=t}),autosize:"",type:"textarea"},null,8,["modelValue"])]})),_:1},8,["label-width"]),D(a,{label:"截止日期","label-width":e.formLabelWidth},{default:k((function(){return[L("div",null,[D(_,{span:11},{default:k((function(){return[D(b,{modelValue:e.form.ddl_date,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.form.ddl_date=t}),type:"date",placeholder:"选择日期",style:{width:"100%"},"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]})),_:1}),D(_,{class:"line",span:1},{default:k((function(){return[X]})),_:1}),D(_,{span:12},{default:k((function(){return[D(g,{modelValue:e.form.ddl_time,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.form.ddl_time=t}),placeholder:"选择时间",style:{width:"100%"},format:"HH:mm","value-format":"HH:mm"},null,8,["modelValue"])]})),_:1})])]})),_:1},8,["label-width"]),D(a,{label:"状态","label-width":e.formLabelWidth},{default:k((function(){return[D(f,{modelValue:e.form.todo_fin,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.form.todo_fin=t}),placeholder:"Select",style:{width:"240px"}},{default:k((function(){return[(C(!0),S(P,null,I(e.fin_options,(function(e){return C(),F(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1},8,["label-width"]),D(a,{label:"创建日期","label-width":e.formLabelWidth},{default:k((function(){return[L("div",null,[D(_,{span:11},{default:k((function(){return[D(b,{modelValue:e.form.crt_date,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.form.crt_date=t}),type:"date",placeholder:"选择日期",style:{width:"100%"},"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]})),_:1}),D(_,{class:"line",span:1},{default:k((function(){return[ee]})),_:1}),D(_,{span:12},{default:k((function(){return[D(g,{modelValue:e.form.crt_time,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.form.crt_time=t}),placeholder:"选择时间",style:{width:"100%"},format:"HH:mm","value-format":"HH:mm"},null,8,["modelValue"])]})),_:1})])]})),_:1},8,["label-width"]),D(a,{label:"添加者ID","label-width":e.formLabelWidth},{default:k((function(){return[D(y,{class:"mx-1",type:"info"},{default:k((function(){return[x(O(e.form.adder_id),1)]})),_:1})]})),_:1},8,["label-width"]),D(a,{label:"待办事项ID","label-width":e.formLabelWidth},{default:k((function(){return[D(y,{class:"mx-1",type:"info"},{default:k((function(){return[x(O(e.form.todo_id),1)]})),_:1})]})),_:1},8,["label-width"]),D(a,{label:"从属用戶ID","label-width":e.formLabelWidth},{default:k((function(){return[D(y,{class:"mx-1",type:"info"},{default:k((function(){return[x(O(e.form.user_id),1)]})),_:1})]})),_:1},8,["label-width"])]})),_:1},8,["model","rules"]),L("div",te,[D(i,{onClick:t[11]||(t[11]=function(t){return e.modifyFormVisible=!1})},{default:k((function(){return[ne]})),_:1}),D(i,{type:"primary",onClick:t[12]||(t[12]=function(t){return e.handleEdit()})},{default:k((function(){return[oe]})),_:1})])]})),_:1},8,["modelValue"]),D(w,{modelValue:e.detailFormVisible,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.detailFormVisible=t}),title:"待办事项详情"},{default:k((function(){return[D(d,{model:e.form},{default:k((function(){return[D(a,{label:"标题  ","label-width":e.formLabelWidth},{default:k((function(){return[x(O(e.form.todo_title),1)]})),_:1},8,["label-width"]),D(a,{label:"内容  ","label-width":e.formLabelWidth},{default:k((function(){return[x(O(e.form.todo_ctnt),1)]})),_:1},8,["label-width"]),D(a,{label:"截止日期  ","label-width":e.formLabelWidth},{default:k((function(){return[x(O(e.form.todo_ddl),1)]})),_:1},8,["label-width"]),D(a,{label:"状态  ","label-width":e.formLabelWidth},{default:k((function(){return[x(O(e.form.todo_fin),1)]})),_:1},8,["label-width"]),D(a,{label:"创建日期  ","label-width":e.formLabelWidth},{default:k((function(){return[x(O(e.form.todo_crt),1)]})),_:1},8,["label-width"]),D(a,{label:"添加者ID  ","label-width":e.formLabelWidth},{default:k((function(){return[x(O(e.form.adder_id),1)]})),_:1},8,["label-width"]),D(a,{label:"待办事項ID  ","label-width":e.formLabelWidth},{default:k((function(){return[x(O(e.form.todo_id),1)]})),_:1},8,["label-width"]),D(a,{label:"从属用戶ID  ","label-width":e.formLabelWidth},{default:k((function(){return[x(O(e.form.user_id),1)]})),_:1},8,["label-width"])]})),_:1},8,["model"]),L("div",le,[D(i,{type:"primary",onClick:t[14]||(t[14]=function(t){return e.detailFormVisible=!1})},{default:k((function(){return[re]})),_:1})])]})),_:1},8,["modelValue"]),D(w,{modelValue:e.statisticsVisible,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.statisticsVisible=t}),title:"统计信息"},{default:k((function(){return[D(v,{shadow:"hover",class:"card"},{default:k((function(){return[L("p",null,[ie,ae,L("span",null,O(e.tableData.length),1)]),L("div",ue,[L("div",de,null,512)]),L("div",ce,[L("p",null,[fe,L("span",null,O(e.statistics.fin),1)]),L("p",null,[se,me,L("span",null,O(e.statistics.unfin),1)])])]})),_:1}),L("div",pe,[D(i,{type:"primary",onClick:t[16]||(t[16]=function(t){return e.statisticsVisible=!1})},{default:k((function(){return[he]})),_:1})])]})),_:1},8,["modelValue"]),D(T,{"current-page":e.currentPage,"page-sizes":[5,10,15,20,25],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.record_cnt,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])}],["__scopeId","data-v-6ee06f3b"]]))}}}))}();
