!function(){var e=document.createElement("style");e.innerHTML=".FormInfo[data-v-3c84b42e]{margin-top:20px}.FormInfo .demo-ruleForm[data-v-3c84b42e]{text-align:left}.FormInfo .info[data-v-3c84b42e]{text-align:left;padding-left:20px;margin-bottom:20px;font-size:12px}.FormInfo .card-header[data-v-3c84b42e]{display:flex;justify-content:space-between;align-items:center}.FormInfo .text[data-v-3c84b42e]{font-size:14px}.FormInfo .item[data-v-3c84b42e]{margin-bottom:18px}.FormInfo .box-card[data-v-3c84b42e]{width:100%}.FormInfo .el-row[data-v-3c84b42e]{margin-bottom:20px}\n",document.head.appendChild(e),System.register(["./vendor-legacy.2803936c.js","./index-legacy.d40e4317.js"],(function(e){"use strict";var t,l,a,n,r,u,o,i,s,d,c,m,f,_,v,p,b,F,y,g,h,V,z,x;return{setters:[function(e){t=e.e,l=e.aQ,a=e.aT,n=e.az,r=e.aU,u=e.j,o=e.B,i=e.r,s=e.c,d=e.m,c=e.f,m=e.g,f=e.t,_=e.s,v=e.i,p=e.F,b=e.v,F=e.q,y=e.E,g=e.p,h=e.h,V=e.Q},function(e){z=e._,x=e.d}],execute:function(){var w=t({name:"AdvanceForm",components:{Edit:l,DeleteFilled:a,Check:n,ArrowLeft:r},setup:function(){u();var e=o({leave_id:0,leave_user_id:"",leave_start_time1:"",leave_start_time2:"",leave_end_time1:"",leave_end_time2:"",leave_type:"",leave_reason:"",leave_status:"未审核",leave_submitted_at:"",cc_user:[],notified_user:0}),t=i([]),l=i();s((function(){x.getAllUsers().then((function(e){var l=e.data[0]||[];t.value=l.map((function(e){return{value:e.userId,label:e.username||e.email}}))})).catch((function(e){console.error("Failed to fetch users:",e),t.value=[]}))}));return{sizeForm:e,all_users:t,activityForm:l,leave_type_options:[{value:"事假",label:"事假"},{value:"病假",label:"病假"},{value:"年假",label:"年假"},{value:"调休",label:"调休"},{value:"婚假",label:"婚假"},{value:"产假",label:"产假"},{value:"陪产假",label:"陪产假"}],submitForm:function(){l.value.validate((function(t){if(t){var l=(new Date).toISOString().slice(0,19).replace("T"," "),a={accessToken:sessionStorage.getItem("accessToken"),reason:e.leave_reason,start_date:e.leave_start_time1+" "+e.leave_start_time2,end_date:e.leave_end_time1+" "+e.leave_end_time2,submitted_at:l,status:"未审核",review_user_id:e.notified_user,cc_user:e.cc_user,type:e.leave_type};console.log("Submission form:",JSON.stringify(a));try{x.addLeaveApproval(a).then((function(t){e.leave_id=t.data.leave_id,e.cc_user&&e.cc_user.length>0&&e.cc_user.forEach((function(t){var a={notified_user_id:t,request_type:"leave",request_id:e.leave_id,submitted_at:l};x.addNotification(a).then((function(e){console.log("CC Notification added:",e.data)}))})),y({type:"success",message:"提交成功"})}))}catch(n){return y({type:"warning",message:n.message}),console.log("submit error"),!1}return e.leave_start_time1="",e.leave_start_time2="",e.leave_end_time1="",e.leave_end_time2="",e.leave_reason="",e.leave_user_id="",e.leave_status="未审核",e.leave_type="",e.notified_user=0,e.cc_user=[],!0}return console.log("submit error"),!1}))},resetForm:function(){l.value.resetFields()}}}}),I={class:"FormInfo"},k={class:"grid-content bg-purple-dark"},U={style:{"text-align":"left"}},H=function(e){return g("data-v-3c84b42e"),e=e(),h(),e}((function(){return v("span",null,"请假申请",-1)})),Y=V("    -"),C=V("    -"),D=V("提交申请"),S=V("取消");e("default",z(w,[["render",function(e,t,l,a,n,r){var u=d("el-divider"),o=d("el-input"),i=d("el-form-item"),s=d("el-option"),y=d("el-select"),g=d("el-date-picker"),h=d("el-col"),V=d("el-time-picker"),z=d("el-button"),x=d("el-form"),w=d("el-card"),M=d("el-row");return c(),m("div",I,[f(M,null,{default:_((function(){return[f(h,{offset:1,span:22},{default:_((function(){return[v("div",k,[f(w,{class:"box-card"},{default:_((function(){return[v("div",U,[H,f(u)]),f(x,{ref:"activityForm",style:{"text-align":"left"},model:e.sizeForm,"label-width":"80px",size:"small"},{default:_((function(){return[f(i,{label:"请假原因"},{default:_((function(){return[f(o,{modelValue:e.sizeForm.leave_reason,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.sizeForm.leave_reason=t})},null,8,["modelValue"])]})),_:1}),f(i,{label:"请假类型"},{default:_((function(){return[f(y,{modelValue:e.sizeForm.leave_type,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.sizeForm.leave_type=t})},{default:_((function(){return[(c(!0),m(p,null,b(e.leave_type_options,(function(e){return c(),F(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),f(i,{label:"开始时间"},{default:_((function(){return[f(h,{span:11},{default:_((function(){return[f(g,{modelValue:e.sizeForm.leave_start_time1,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.sizeForm.leave_start_time1=t}),type:"date",placeholder:"选择日期",style:{width:"100%"},"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]})),_:1}),f(h,{class:"line",span:1},{default:_((function(){return[Y]})),_:1}),f(h,{span:12},{default:_((function(){return[f(V,{modelValue:e.sizeForm.leave_start_time2,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.sizeForm.leave_start_time2=t}),placeholder:"选择时间",style:{width:"100%"},format:"HH:mm","value-format":"HH:mm"},null,8,["modelValue"])]})),_:1})]})),_:1}),f(i,{label:"结束时间"},{default:_((function(){return[f(h,{span:11},{default:_((function(){return[f(g,{modelValue:e.sizeForm.leave_end_time1,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.sizeForm.leave_end_time1=t}),type:"date",placeholder:"选择日期",style:{width:"100%"},"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]})),_:1}),f(h,{class:"line",span:1},{default:_((function(){return[C]})),_:1}),f(h,{span:12},{default:_((function(){return[f(V,{modelValue:e.sizeForm.leave_end_time2,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.sizeForm.leave_end_time2=t}),placeholder:"选择时间",style:{width:"100%"},format:"HH:mm","value-format":"HH:mm"},null,8,["modelValue"])]})),_:1})]})),_:1}),f(i,{label:"报送"},{default:_((function(){return[f(y,{modelValue:e.sizeForm.notified_user,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.sizeForm.notified_user=t}),"collapse-tags":"",placeholder:"选择要报送的用户",style:{width:"240px"}},{default:_((function(){return[(c(!0),m(p,null,b(e.all_users,(function(e){return c(),F(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),f(i,{label:"抄送"},{default:_((function(){return[f(y,{modelValue:e.sizeForm.cc_user,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.sizeForm.cc_user=t}),"collapse-tags":"",placeholder:"选择要抄送的用户",style:{width:"240px"},multiple:""},{default:_((function(){return[(c(!0),m(p,null,b(e.all_users,(function(e){return c(),F(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),f(i,{size:"large"},{default:_((function(){return[f(z,{type:"primary",onClick:e.submitForm},{default:_((function(){return[D]})),_:1},8,["onClick"]),f(z,null,{default:_((function(){return[S]})),_:1})]})),_:1})]})),_:1},8,["model"])]})),_:1})])]})),_:1})]})),_:1})])}],["__scopeId","data-v-3c84b42e"]]))}}}))}();
