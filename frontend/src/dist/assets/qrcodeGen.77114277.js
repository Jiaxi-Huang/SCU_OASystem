import{Q as ie}from"./qrcode.vue.esm.36b9f92c.js";import{_ as ae}from"./index.63817855.js";import{e as ce,r as G,m as D,f as se,g as le,i as I,t as x,s as q,Q as z,p as fe,h as de,E as he}from"./vendor.e05abf4c.js";var K={exports:{}};(function(m){(function(F){var i=ne(),L=re(),O=oe(),H=ue(),N={imagePlaceholder:void 0,cacheBust:!1},_={toSvg:S,toPng:R,toJpeg:k,toBlob:M,toPixelData:g,impl:{fontFaces:O,images:H,util:i,inliner:L,options:{}}};m.exports=_;function S(n,t){return t=t||{},W(t),Promise.resolve(n).then(function(u){return X(u,t.filter,!0)}).then(Z).then(ee).then(r).then(function(u){return te(u,t.width||i.width(n),t.height||i.height(n))});function r(u){return t.bgcolor&&(u.style.backgroundColor=t.bgcolor),t.width&&(u.style.width=t.width+"px"),t.height&&(u.style.height=t.height+"px"),t.style&&Object.keys(t.style).forEach(function(l){u.style[l]=t.style[l]}),u}}function g(n,t){return j(n,t||{}).then(function(r){return r.getContext("2d").getImageData(0,0,i.width(n),i.height(n)).data})}function R(n,t){return j(n,t||{}).then(function(r){return r.toDataURL()})}function k(n,t){return t=t||{},j(n,t).then(function(r){return r.toDataURL("image/jpeg",t.quality||1)})}function M(n,t){return j(n,t||{}).then(i.canvasToBlob)}function W(n){typeof n.imagePlaceholder=="undefined"?_.impl.options.imagePlaceholder=N.imagePlaceholder:_.impl.options.imagePlaceholder=n.imagePlaceholder,typeof n.cacheBust=="undefined"?_.impl.options.cacheBust=N.cacheBust:_.impl.options.cacheBust=n.cacheBust}function j(n,t){return S(n,t).then(i.makeImage).then(i.delay(100)).then(function(u){var l=r(n);return l.getContext("2d").drawImage(u,0,0),l});function r(u){var l=document.createElement("canvas");if(l.width=t.width||i.width(u),l.height=t.height||i.height(u),t.bgcolor){var s=l.getContext("2d");s.fillStyle=t.bgcolor,s.fillRect(0,0,l.width,l.height)}return l}}function X(n,t,r){if(!r&&t&&!t(n))return Promise.resolve();return Promise.resolve(n).then(u).then(function(o){return l(n,o,t)}).then(function(o){return s(n,o)});function u(o){return o instanceof HTMLCanvasElement?i.makeImage(o.toDataURL()):o.cloneNode(!1)}function l(o,a,w){var E=o.childNodes;if(E.length===0)return Promise.resolve(a);return h(a,i.asArray(E),w).then(function(){return a});function h(V,y,p){var P=Promise.resolve();return y.forEach(function(U){P=P.then(function(){return X(U,p)}).then(function(b){b&&V.appendChild(b)})}),P}}function s(o,a){if(!(a instanceof Element))return a;return Promise.resolve().then(w).then(E).then(h).then(V).then(function(){return a});function w(){y(window.getComputedStyle(o),a.style);function y(p,P){p.cssText?P.cssText=p.cssText:U(p,P);function U(b,C){i.asArray(b).forEach(function(e){C.setProperty(e,b.getPropertyValue(e),b.getPropertyPriority(e))})}}}function E(){[":before",":after"].forEach(function(p){y(p)});function y(p){var P=window.getComputedStyle(o,p),U=P.getPropertyValue("content");if(U===""||U==="none")return;var b=i.uid();a.className=a.className+" "+b;var C=document.createElement("style");C.appendChild(e(b,p,P)),a.appendChild(C);function e(c,d,f){var v="."+c+":"+d,A=f.cssText?J(f):Q(f);return document.createTextNode(v+"{"+A+"}");function J(T){var B=T.getPropertyValue("content");return T.cssText+" content: "+B+";"}function Q(T){return i.asArray(T).map(B).join("; ")+";";function B($){return $+": "+T.getPropertyValue($)+(T.getPropertyPriority($)?" !important":"")}}}}}function h(){o instanceof HTMLTextAreaElement&&(a.innerHTML=o.value),o instanceof HTMLInputElement&&a.setAttribute("value",o.value)}function V(){a instanceof SVGElement&&(a.setAttribute("xmlns","http://www.w3.org/2000/svg"),a instanceof SVGRectElement&&["width","height"].forEach(function(y){var p=a.getAttribute(y);!p||a.style.setProperty(y,p)}))}}}function Z(n){return O.resolveAll().then(function(t){var r=document.createElement("style");return n.appendChild(r),r.appendChild(document.createTextNode(t)),n})}function ee(n){return H.inlineAll(n).then(function(){return n})}function te(n,t,r){return Promise.resolve(n).then(function(u){return u.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(u)}).then(i.escapeXhtml).then(function(u){return'<foreignObject x="0" y="0" width="100%" height="100%">'+u+"</foreignObject>"}).then(function(u){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+t+'" height="'+r+'">'+u+"</svg>"}).then(function(u){return"data:image/svg+xml;charset=utf-8,"+u})}function ne(){return{escape:V,parseExtension:t,mimeType:r,dataAsUrl:h,isDataUrl:u,canvasToBlob:s,resolveUrl:o,getAndEncode:E,uid:a(),delay:y,asArray:p,escapeXhtml:P,makeImage:w,width:U,height:b};function n(){var e="application/font-woff",c="image/jpeg";return{woff:e,woff2:e,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:c,jpeg:c,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function t(e){var c=/\.([^\.\/]*?)$/g.exec(e);return c?c[1]:""}function r(e){var c=t(e).toLowerCase();return n()[c]||""}function u(e){return e.search(/^(data:)/)!==-1}function l(e){return new Promise(function(c){for(var d=window.atob(e.toDataURL().split(",")[1]),f=d.length,v=new Uint8Array(f),A=0;A<f;A++)v[A]=d.charCodeAt(A);c(new Blob([v],{type:"image/png"}))})}function s(e){return e.toBlob?new Promise(function(c){e.toBlob(c)}):l(e)}function o(e,c){var d=document.implementation.createHTMLDocument(),f=d.createElement("base");d.head.appendChild(f);var v=d.createElement("a");return d.body.appendChild(v),f.href=c,v.href=e,v.href}function a(){var e=0;return function(){return"u"+c()+e++;function c(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function w(e){return new Promise(function(c,d){var f=new Image;f.onload=function(){c(f)},f.onerror=d,f.src=e})}function E(e){var c=3e4;return _.impl.options.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime()),new Promise(function(d){var f=new XMLHttpRequest;f.onreadystatechange=J,f.ontimeout=Q,f.responseType="blob",f.timeout=c,f.open("GET",e,!0),f.send();var v;if(_.impl.options.imagePlaceholder){var A=_.impl.options.imagePlaceholder.split(/,/);A&&A[1]&&(v=A[1])}function J(){if(f.readyState===4){if(f.status!==200){v?d(v):T("cannot fetch resource: "+e+", status: "+f.status);return}var B=new FileReader;B.onloadend=function(){var $=B.result.split(/,/)[1];d($)},B.readAsDataURL(f.response)}}function Q(){v?d(v):T("timeout of "+c+"ms occured while fetching resource: "+e)}function T(B){console.error(B),d("")}})}function h(e,c){return"data:"+c+";base64,"+e}function V(e){return e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function y(e){return function(c){return new Promise(function(d){setTimeout(function(){d(c)},e)})}}function p(e){for(var c=[],d=e.length,f=0;f<d;f++)c.push(e[f]);return c}function P(e){return e.replace(/#/g,"%23").replace(/\n/g,"%0A")}function U(e){var c=C(e,"border-left-width"),d=C(e,"border-right-width");return e.scrollWidth+c+d}function b(e){var c=C(e,"border-top-width"),d=C(e,"border-bottom-width");return e.scrollHeight+c+d}function C(e,c){var d=window.getComputedStyle(e).getPropertyValue(c);return parseFloat(d.replace("px",""))}}function re(){var n=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:l,shouldProcess:t,impl:{readUrls:r,inline:u}};function t(s){return s.search(n)!==-1}function r(s){for(var o=[],a;(a=n.exec(s))!==null;)o.push(a[1]);return o.filter(function(w){return!i.isDataUrl(w)})}function u(s,o,a,w){return Promise.resolve(o).then(function(h){return a?i.resolveUrl(h,a):h}).then(w||i.getAndEncode).then(function(h){return i.dataAsUrl(h,i.mimeType(o))}).then(function(h){return s.replace(E(o),"$1"+h+"$3")});function E(h){return new RegExp(`(url\\(['"]?)(`+i.escape(h)+`)(['"]?\\))`,"g")}}function l(s,o,a){if(w())return Promise.resolve(s);return Promise.resolve(s).then(r).then(function(E){var h=Promise.resolve(s);return E.forEach(function(V){h=h.then(function(y){return u(y,V,o,a)})}),h});function w(){return!t(s)}}}function oe(){return{resolveAll:n,impl:{readAll:t}};function n(){return t().then(function(r){return Promise.all(r.map(function(u){return u.resolve()}))}).then(function(r){return r.join(`
`)})}function t(){return Promise.resolve(i.asArray(document.styleSheets)).then(u).then(r).then(function(s){return s.map(l)});function r(s){return s.filter(function(o){return o.type===CSSRule.FONT_FACE_RULE}).filter(function(o){return L.shouldProcess(o.style.getPropertyValue("src"))})}function u(s){var o=[];return s.forEach(function(a){try{i.asArray(a.cssRules||[]).forEach(o.push.bind(o))}catch(w){console.log("Error while reading CSS rules from "+a.href,w.toString())}}),o}function l(s){return{resolve:function(){var a=(s.parentStyleSheet||{}).href;return L.inlineAll(s.cssText,a)},src:function(){return s.style.getPropertyValue("src")}}}}}function ue(){return{inlineAll:t,impl:{newImage:n}};function n(r){return{inline:u};function u(l){return i.isDataUrl(r.src)?Promise.resolve():Promise.resolve(r.src).then(l||i.getAndEncode).then(function(s){return i.dataAsUrl(s,i.mimeType(r.src))}).then(function(s){return new Promise(function(o,a){r.onload=o,r.onerror=a,r.src=s})})}}function t(r){if(!(r instanceof Element))return Promise.resolve(r);return u(r).then(function(){return r instanceof HTMLImageElement?n(r).inline():Promise.all(i.asArray(r.childNodes).map(function(l){return t(l)}))});function u(l){var s=l.style.getPropertyValue("background");return s?L.inlineAll(s).then(function(o){l.style.setProperty("background",o,l.style.getPropertyPriority("background"))}).then(function(){return l}):Promise.resolve(l)}}}})()})(K);var me=K.exports;const pe=(m,F)=>{const i=new XMLHttpRequest;i.open("get",m,!0),i.responseType="blob",i.onload=function(){this.status===200&&F&&F(this.response)},i.send()};const ge=ce({components:{qrcodeVue:ie},setup(){const m=G(),F=G(),i=G(),L=G("https://example.com"),O={hostName:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E8C\u7EF4\u7801\u94FE\u63A5",trigger:"blur"}]},H=G({hostName:"https://example.com"}),N=()=>{pe(m.value,S=>{const g=document.createElement("a"),R=window.URL.createObjectURL(S);g.href=R,g.download="Download.png",document.body.appendChild(g),g.click(),document.body.removeChild(g)}),he.success("\u4FDD\u5B58\u6210\u529F\uFF01")};return{qrcodeRef:F,value:L,configFormRef:i,configForm:H,configRules:O,generateImg:()=>{const S={cacheBust:!0,width:375,bgcolor:"#fff"};me.toBlob(F.value,S).then(g=>{const R=new FileReader;R.onload=k=>{var M;m.value=(M=k==null?void 0:k.target)==null?void 0:M.result,N()},g&&R.readAsDataURL(g)}).catch(g=>{console.error("oops, something went wrong!",g)})}}}}),Y=m=>(fe("data-v-3958b9bf"),m=m(),de(),m),ve={class:"qrcode-container"},we={class:"info"},ye=z("\u751F\u6210\u4E8C\u7EF4\u7801"),_e=Y(()=>I("span",{style:{"text-align":"left"}},"\u751F\u6210\u4E8C\u7EF4\u7801\u901A\u5E38\u7528\u6765\u505A\u524D\u53F0\u6D77\u62A5\u751F\u6210\u6216\u8005\u540E\u53F0\u6D3B\u52A8\u8425\u9500\u63A8\u5E7F\u7801\u914D\u7F6E",-1)),Pe={class:"grid-content bg-purple-dark"},be={style:{"text-align":"left"}},Ee=Y(()=>I("span",null,"\u540E\u53F0\u6D3B\u52A8\u8425\u9500\u914D\u7F6E\u63A8\u5E7F\u7801\u573A\u666F",-1)),Ae={class:"qrcode-wrapper"},xe={ref:"qrcodeRef"},Fe={class:"qrcode-config"},Ce=z("\u4FDD\u5B58\u4E8C\u7EF4\u7801");function Te(m,F,i,L,O,H){const N=D("el-divider"),_=D("qrcode-vue"),S=D("el-input"),g=D("el-form-item"),R=D("el-button"),k=D("el-form"),M=D("el-card"),W=D("el-col"),j=D("el-row");return se(),le("div",ve,[I("div",we,[x(N,{"content-position":"left"},{default:q(()=>[ye]),_:1}),_e]),x(j,null,{default:q(()=>[x(W,{offset:1,span:22},{default:q(()=>[I("div",Pe,[x(M,{class:"box-card"},{default:q(()=>[I("div",be,[Ee,x(N)]),I("div",Ae,[I("div",xe,[x(_,{value:m.configForm.hostName},null,8,["value"])],512),I("div",Fe,[x(k,{ref:"configFormRef",model:m.configForm,rules:m.configRules,"label-width":"80px"},{default:q(()=>[x(g,{label:"\u57DF\u540D",prop:"hostName"},{default:q(()=>[x(S,{modelValue:m.configForm.hostName,"onUpdate:modelValue":F[0]||(F[0]=X=>m.configForm.hostName=X)},null,8,["modelValue"])]),_:1}),x(R,{onClick:m.generateImg},{default:q(()=>[Ce]),_:1},8,["onClick"])]),_:1},8,["model","rules"])])])]),_:1})])]),_:1})]),_:1})])}var Re=ae(ge,[["render",Te],["__scopeId","data-v-3958b9bf"]]);export{Re as default};
