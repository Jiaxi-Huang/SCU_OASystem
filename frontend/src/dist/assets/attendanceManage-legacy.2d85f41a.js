!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */r=function(){return t};var t={},n=Object.prototype,a=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(D){c=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof p?t:p,o=Object.create(a.prototype),u=new x(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return O()}for(n.method=a,n.arg=o;;){var u=n.delegate;if(u){var i=k(u,n);if(i){if(i===f)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=d(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,u),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}t.wrap=s;var f={};function p(){}function m(){}function h(){}var g={};c(g,u,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(S([])));y&&y!==n&&a.call(y,u)&&(g=y);var w=h.prototype=p.prototype=Object.create(g);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(t,n){function r(o,u,i,l){var c=d(t[o],t,u);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==e(f)&&a.call(f,"__await")?n.resolve(f.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):n.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var o;this._invoke=function(e,t){function a(){return new n((function(n,a){r(e,t,n,a)}))}return o=o?o.then(a,a):a()}}function k(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=d(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function S(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:O}}function O(){return{value:void 0,done:!0}}return m.prototype=h,c(w,"constructor",h),c(h,"constructor",m),m.displayName=c(h,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},b(_.prototype),c(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var u=new _(s(e,n,r,a),o);return t.isGeneratorFunction(n)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},b(w),c(w,l,"Generator"),c(w,u,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return u.type="throw",u.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],u=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=e,u.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function a(e,t,n,r,a,o,u){try{var i=e[o](u),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var u=e.apply(t,n);function i(e){a(u,r,o,i,l,"next",e)}function l(e){a(u,r,o,i,l,"throw",e)}i(void 0)}))}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=document.createElement("style");c.innerHTML=".btns[data-v-6dc6064c]{text-align:right}.el-transfer[data-v-6dc6064c]{display:inline-block;text-align:left}.transfer[data-v-6dc6064c]{text-align:center}.card-header[data-v-6dc6064c]{text-align:left}.btns[data-v-0ba6a54c]{text-align:right}.el-transfer[data-v-0ba6a54c]{display:inline-block;text-align:left}.transfer[data-v-0ba6a54c]{text-align:center}.card-header[data-v-0ba6a54c]{text-align:left}\n",document.head.appendChild(c),System.register(["./index-legacy.d40e4317.js","./vendor-legacy.2803936c.js","./attendanceStatistic-legacy.9b7669c3.js"],(function(e){"use strict";var n,a,u,l,c,s,d,f,p,m,h,g,v,y,w,b,_,k,L,C,x,S,O,D,I,V,E,R,N,j,A,P,z,T,H,F,U,K,q,M;return{setters:[function(e){n=e._,a=e.u},function(e){u=e.e,l=e.R,c=e.B,s=e.k,d=e.D,f=e.m,p=e.aB,m=e.O,h=e.f,g=e.g,v=e.t,y=e.s,w=e.Q,b=e.y,_=e.C,k=e.S,L=e.i,C=e.F,x=e.v,S=e.q,O=e.p,D=e.h,I=e.r,V=e.A,E=e.ax,R=e.aR,N=e.aF,j=e.aO,A=e.aP,P=e.aQ,z=e.aG,T=e.aH,H=e.w,F=e.c,U=e.N,K=e.E},function(e){q=e.S,M=e.A}],execute:function(){var Y=u({name:"attendanceDetail",props:{currentRow:{type:Object,default:function(){return{userId:null,userName:"",userDepartment:"",userRole:"",userPhone:"",userAvatar:""}}}},setup:function(e){var t=l(e,"currentRow"),n=c({loading:!1}),r=[{value:"IT",label:"技术部"},{value:"Market",label:"市场部"},{value:"HR",label:"人力资源部"}],a=[{value:"admin",label:"管理员"},{value:"manager",label:"部门经理"},{value:"worker",label:"员工"}],o=s((function(){return t.value}));return i(i({},d(n)),{},{departments:r,roles:a,departmentLabel:function(e){var t=r.find((function(t){return t.value===e}));return t?t.label:"未知"},roleLabel:function(e){var t=a.find((function(t){return t.value===e}));return t?t.label:"未知"},row:o})}}),G={class:"new"};var B=n(Y,[["render",function(e,t,n,r,a,o){var u=f("el-descriptions-item"),i=f("el-descriptions"),l=p("loading");return m((h(),g("div",G,[v(i,{column:1,border:""},{default:y((function(){return[v(u,{label:"用户id"},{default:y((function(){return[w(b(e.row.userId),1)]})),_:1}),v(u,{label:"用户名"},{default:y((function(){return[w(b(e.row.userName),1)]})),_:1}),v(u,{label:"用户部门"},{default:y((function(){return[w(b(e.row.userDepartment),1)]})),_:1}),v(u,{label:"用户职位"},{default:y((function(){return[w(b(e.row.userRole),1)]})),_:1}),v(u,{label:"上班打卡时间"},{default:y((function(){return[w(b(e.row.checkIn),1)]})),_:1}),v(u,{label:"上班打卡位置"},{default:y((function(){return[w(b(e.row.inLocation),1)]})),_:1}),v(u,{label:"下班打卡时间"},{default:y((function(){return[w(b(e.row.checkOut),1)]})),_:1}),v(u,{label:"下班打卡位置"},{default:y((function(){return[w(b(e.row.outLocation),1)]})),_:1}),v(u,{label:"考勤状态"},{default:y((function(){return[w(b(e.row.status),1)]})),_:1})]})),_:1})])),[[l,e.loading]])}],["__scopeId","data-v-6dc6064c"]]),$=u({name:"attendanceEdit",props:{currentRow:{type:Object,default:function(){return{userName:"",attendanceDate:"",checkIn:"",inLocation:"",checkOut:"",outLocation:""}}}},emits:["success"],setup:function(e,t){var n=t.emit,u=l(e,"currentRow"),f=a(),p=s((function(){return f.getters["settingsModule/getLangState"]})),m=c({url:"/attendance/allow",purl:"/attendance/permissions",loading:!1,form:{userName:"",attendanceDate:"",checkOut:"",inLocation:"",checkIn:"",outLocation:""},menu:{loading:!1,url:"/menu/list",data:[],form:[]}}),h=s((function(){return u.value})),g=function(){var e=o(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={attendanceDate:m.form.attendanceDate,checkIn:m.form.checkIn,checkOut:m.form.checkOut,inLocation:m.form.inLocation,outLocation:m.form.outLocation,userId:h.value.userId,id:h.value.id},e.next=3,q.postEditAttendance(t);case 3:0===e.sent.status&&n("success");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return _((function(){h.value&&(m.form.userName=h.value.userName,m.form.checkOut=h.value.checkOut,m.form.checkIn=h.value.checkIn,m.form.inLocation=h.value.inLocation,m.form.outLocation=h.value.outLocation,m.form.attendanceDate=h.value.attendanceDate)})),i(i({},d(m)),{},{rules:{userId:[{required:!0,message:"请输入员工ID",trigger:"blur"},{type:"number",message:"请输入有效数字",trigger:"blur"}],attendanceDate:[{required:!0,message:"请选择考勤日期",trigger:"change"}],checkIn:[{required:!0,message:"请输入上班考勤时间",trigger:"change"}],checkOut:[{required:!0,message:"请输入下班考勤时间",trigger:"change"}],inLocation:[{required:!1,message:"请输入上班考勤位置",trigger:"change"}],outLocation:[{required:!1,message:"请输入下班考勤位置",trigger:"change"}]},lang:p,locations:[{value:"内网ip",label:"内网ip"},{value:"成都",label:"成都"},{value:"上海",label:"上海"},{value:"北京",label:"北京"}],row:h,saveData:g})}}),Q={class:"new"},J={key:0},W=function(e){return O("data-v-0ba6a54c"),e=e(),D(),e}((function(){return L("i",{class:"fa fa-plus"},null,-1)})),X=w(" 修改 ");var Z=n($,[["render",function(e,t,n,r,a,o){var u=f("el-form-item"),i=f("el-date-picker"),l=f("el-col"),c=f("el-time-picker"),s=f("el-option"),d=f("el-select"),w=f("el-button"),_=f("el-row"),O=f("el-form"),D=p("loading");return m((h(),g("div",Q,[v(O,{ref:"formRef",model:e.form,rules:e.rules,"label-position":"right","label-width":"100px",title:"新增员工"},{default:y((function(){return[v(u,{label:"名称"},{default:y((function(){return[e.row&&e.row.userName?(h(),g("span",J,b(e.row.userName),1)):k("",!0)]})),_:1}),v(u,{label:"考勤日期"},{default:y((function(){return[L("div",null,[v(l,{span:30},{default:y((function(){return[v(i,{modelValue:e.form.attendanceDate,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.attendanceDate=t}),type:"date",placeholder:"选择日期",style:{width:"100%"},"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]})),_:1})])]})),_:1}),v(u,{label:"上班打卡时间"},{default:y((function(){return[v(l,{span:12},{default:y((function(){return[v(c,{modelValue:e.form.checkIn,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.checkIn=t}),placeholder:"选择时间",style:{width:"100%"},format:"HH:mm:ss","value-format":"HH:mm:ss"},null,8,["modelValue"])]})),_:1})]})),_:1}),v(u,{label:"上班打卡位置",prop:"inLocation"},{default:y((function(){return[v(d,{modelValue:e.form.inLocation,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.inLocation=t}),placeholder:"请选择位置"},{default:y((function(){return[(h(!0),g(C,null,x(e.locations,(function(e){return h(),S(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),v(u,{label:"下班打卡时间"},{default:y((function(){return[v(l,{span:12},{default:y((function(){return[v(c,{modelValue:e.form.checkOut,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.checkOut=t}),placeholder:"选择时间",style:{width:"100%"},format:"HH:mm:ss","value-format":"HH:mm:ss"},null,8,["modelValue"])]})),_:1})]})),_:1}),v(u,{label:"下班打卡位置",prop:"outLocation"},{default:y((function(){return[v(d,{modelValue:e.form.outLocation,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.outLocation=t}),placeholder:"请选择位置"},{default:y((function(){return[(h(!0),g(C,null,x(e.locations,(function(e){return h(),S(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),v(_,{class:"btn-container"},{default:y((function(){return[v(w,{size:"mini",type:"primary",onClick:t[5]||(t[5]=function(t){return e.saveData()})},{default:y((function(){return[W,X]})),_:1})]})),_:1})]})),_:1},8,["model","rules"])])),[[D,e.loading]])}],["__scopeId","data-v-0ba6a54c"]]),ee=u({name:"attendanceNew",emits:["success"],setup:function(e,t){var n=t.emit,a=I(),u=c({form:{userName:"",attendanceDate:"",checkIn:"",checkOut:"",inLocation:"",outLocation:""},loading:!1}),l=function(){var e=o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.value.validate(function(){var e=o(r().mark((function e(t){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return a={userName:u.form.userName,attendanceDate:u.form.attendanceDate,checkIn:u.form.checkIn,checkOut:u.form.checkOut,inLocation:u.form.inLocation,outLocation:u.form.outLocation},e.next=4,q.postAddAttendance(a);case 4:0===e.sent.status&&n("success");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i({submitForm:l,rules:{userName:[{required:!0,message:"请输入员工名",trigger:"blur"}],attendanceDate:[{required:!0,message:"请选择考勤日期",trigger:"change"}],checkIn:[{required:!0,message:"请输入上班考勤时间",trigger:"change"}],checkOut:[{required:!0,message:"请输入下班考勤时间",trigger:"change"}],inLocation:[{required:!1,message:"请输入上班考勤位置",trigger:"change"}],outLocation:[{required:!1,message:"请输入下班考勤位置",trigger:"change"}]},locations:[{value:"内网ip",label:"内网ip"},{value:"成都",label:"成都"},{value:"上海",label:"上海"},{value:"北京",label:"北京"}],formRef:a,url:"/attendance/add"},d(u))}}),te={class:"new"},ne=L("i",{class:"fa fa-plus"},null,-1),re=w(" 新增 ");var ae=u({name:"AttendanceManage",computed:{Search:function(){return V},Refresh:function(){return E}},components:{Odometer:R,AttendanceDetail:B,InfoFilled:N,Printer:j,Download:A,AttendanceEdit:Z,AttendanceNew:n(ee,[["render",function(e,t,n,r,a,o){var u=f("el-input"),i=f("el-form-item"),l=f("el-date-picker"),c=f("el-col"),s=f("el-time-picker"),d=f("el-option"),w=f("el-select"),b=f("el-button"),_=f("el-row"),k=f("el-form"),O=p("loading");return m((h(),g("div",te,[v(k,{ref:"formRef",model:e.form,rules:e.rules,"label-position":"right","label-width":"100px",title:"新增考勤"},{default:y((function(){return[v(i,{label:"员工名",prop:"userName"},{default:y((function(){return[v(u,{modelValue:e.form.userName,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.userName=t}),placeholder:"请输入员工名"},null,8,["modelValue"])]})),_:1}),v(i,{label:"考勤日期"},{default:y((function(){return[L("div",null,[v(c,{span:30},{default:y((function(){return[v(l,{modelValue:e.form.attendanceDate,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.attendanceDate=t}),type:"date",placeholder:"选择日期",style:{width:"100%"},"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]})),_:1})])]})),_:1}),v(i,{label:"上班打卡时间"},{default:y((function(){return[v(c,{span:12},{default:y((function(){return[v(s,{modelValue:e.form.checkIn,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.checkIn=t}),placeholder:"选择时间",style:{width:"100%"},format:"HH:mm:ss","value-format":"HH:mm:ss"},null,8,["modelValue"])]})),_:1})]})),_:1}),v(i,{label:"上班打卡位置",prop:"inLocation"},{default:y((function(){return[v(w,{modelValue:e.form.inLocation,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.inLocation=t}),placeholder:"请选择位置"},{default:y((function(){return[(h(!0),g(C,null,x(e.locations,(function(e){return h(),S(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),v(i,{label:"下班打卡时间"},{default:y((function(){return[v(c,{span:12},{default:y((function(){return[v(s,{modelValue:e.form.checkOut,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.checkOut=t}),placeholder:"选择时间",style:{width:"100%"},format:"HH:mm:ss","value-format":"HH:mm:ss"},null,8,["modelValue"])]})),_:1})]})),_:1}),v(i,{label:"下班打卡位置",prop:"outLocation"},{default:y((function(){return[v(w,{modelValue:e.form.outLocation,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.outLocation=t}),placeholder:"请选择位置"},{default:y((function(){return[(h(!0),g(C,null,x(e.locations,(function(e){return h(),S(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),v(_,{class:"btn-container"},{default:y((function(){return[v(b,{size:"mini",type:"primary",onClick:t[6]||(t[6]=function(t){return e.submitForm()})},{default:y((function(){return[ne,re]})),_:1})]})),_:1})]})),_:1},8,["model","rules"])])),[[O,e.loading]])}]]),AttendanceStatistic:M,Edit:P,Minus:z,Plus:T,Refresh:E},setup:function(){var e=c({url:{c:"/attendance/add",r:"/attendance/list",u:"/attendance/update",d:"/attendance/delete"},param:{total:0,size:10,page:1},data:[{status:"",userId:"",userName:"",department:"",role:"",userRole:""}],filteredData:[],loading:!1,is_search:!1,add_visible:!1,edit_visible:!1,detail_visible:!1,statistic_visible:!1,posted:{userRow:{id:null,userId:"",userName:"",userRole:"",userDepartment:"",checkIn:"",checkOut:"",inLocation:"",outLocation:"",status:""}},sortField:"",sortOrder:"",ids:[],selectionRows:[],searchKeyword:"",pickDate:(new Date).toISOString().split("T")[0]}),n=function(){return e.sortField?t(e.data).sort((function(t,n){var r=t[e.sortField],a=n[e.sortField];return r<a?"asc"===e.sortOrder?-1:1:r>a?"asc"===e.sortOrder?1:-1:0})):e.data},a=function(){var t=o(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.is_search=!1,sessionStorage.getItem("accessToken"),t.next=4,q.postAttendanceList(e.pickDate);case 4:0===(n=t.sent).status&&(e.data=n.data,e.ids=n.data.map((function(e){return e.id})),e.param.total=e.data.length);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=function(){return e.is_search?n().filter((function(t){return t.userId.toString().toLowerCase().includes(e.searchKeyword.toLowerCase())||t.userName.toLowerCase().includes(e.searchKeyword.toLowerCase())||t.role.toLowerCase().includes(e.searchKeyword.toLowerCase())||t.department.toLowerCase().includes(e.searchKeyword.toLowerCase())||t.status.toLowerCase().includes(e.searchKeyword.toLowerCase())})).slice((e.param.page-1)*e.param.size,e.param.page*e.param.size):n().slice((e.param.page-1)*e.param.size,e.param.page*e.param.size)},l=function(){""!=e.searchKeyword?(e.is_search=!0,e.param.page=1,e.filteredData=e.data.filter((function(t){return t.userId.toString().toLowerCase().includes(e.searchKeyword.toLowerCase())||t.userName.toLowerCase().includes(e.searchKeyword.toLowerCase())||t.role.toLowerCase().includes(e.searchKeyword.toLowerCase())||t.department.toLowerCase().includes(e.searchKeyword.toLowerCase())||t.status.toLowerCase().includes(e.searchKeyword.toLowerCase())})),e.param.total=e.filteredData.length):(e.is_search=!1,e.param.page=1,e.param.total=e.data.length)},s=function(){var e=o(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U.confirm("此操作将删除该考勤数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.postDeleteAttendance(t.id);case 2:0===e.sent.status?(K({type:"success",message:"删除成功"}),a()):K({type:"error",message:"删除失败"});case 4:case"end":return e.stop()}}),e)})))).catch((function(){K({type:"info",message:"已取消删除"})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var t=o(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:U.confirm("确定要导出为Excel吗","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(o(r().mark((function t(){var n,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.selectionRows.length>0?e.selectionRows:e.ids,a={accessToken:sessionStorage.getItem("accessToken"),user_ids:n},q.postAdminExportAttendance(a).then((function(){K({type:"success",message:"Excel 文件正在下载..."})})).catch((function(){K({type:"error",message:"下载失败，请重试"})}));case 3:case"end":return t.stop()}}),t)})))).catch((function(){K({type:"info",message:"已取消"})}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p=function(){var t=o(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:U.confirm("确定要下载PDF吗","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(o(r().mark((function t(){var n,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.selectionRows.length>0?e.selectionRows:e.ids,a={accessToken:sessionStorage.getItem("accessToken"),user_ids:n},q.postAdminPrintAttendance(a).then((function(){K({type:"success",message:"PDF 文件正在下载..."})})).catch((function(){K({type:"error",message:"下载失败，请重试"})}));case 3:case"end":return t.stop()}}),t)})))).catch((function(){K({type:"info",message:"已取消"})}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=o(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.statistic_visible=!0;case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return H((function(){return e.searchKeyword}),(function(e){l()})),F((function(){a(),u()})),i(i({},d(e)),{},{displayData:u,handleSelectionChange:function(t){e.selectionRows=t.map((function(e){return e.id}))},onCurrentChange:function(t){e.param.page=t},onSizeChange:function(t){e.param.page=1,e.param.size=t},onCreate:function(){e.add_visible=!0},onCreateSuccess:function(t){e.add_visible=!1,a()},onEditSuccess:function(){e.edit_visible=!1,a()},onDetail:function(t,n){e.posted.userRow.userId=n.userId,e.posted.userRow.userName=n.userName,e.posted.userRow.userRole=n.role,e.posted.userRow.userDepartment=n.department,e.posted.userRow.checkIn=n.checkIn,e.posted.userRow.inLocation=n.inLocation,e.posted.userRow.checkOut=n.checkOut,e.posted.userRow.outLocation=n.outLocation,e.posted.userRow.status=n.status,e.detail_visible=!0},onStatistic:m,onEdit:function(t,n){e.posted.userRow.id=n.id,e.posted.userRow.userName=n.userName,e.posted.userRow.checkIn=n.checkIn,e.posted.userRow.checkOut=n.checkOut,e.edit_visible=!0},onDelete:function(e,t){s(t)},onSearch:l,onExport:f,onPrint:p,fetchData:a,handleSortChange:function(t){var n=t.prop,r=t.order;e.sortField=n,e.sortOrder="ascending"===r?"asc":"desc"},filterStatus:function(e,t){return t.status===e}})}}),oe=L("h4",{class:"page-title"},"当天考勤情况",-1),ue={class:"page-title-right"},ie={style:{"margin-right":"10px"}},le=w("新增考勤"),ce=w("导出列表"),se=w("打印列表"),de=w("统计信息"),fe=L("br",null,null,-1),pe={class:"pagination"};e("default",n(ae,[["render",function(e,t,n,r,a,o){var u=f("el-date-picker"),i=f("el-col"),l=f("el-row"),c=f("plus"),s=f("el-icon"),d=f("el-button"),_=f("download"),k=f("printer"),C=f("odometer"),x=f("el-input"),O=f("el-table-column"),D=f("el-tag"),I=f("InfoFilled"),V=f("el-tooltip"),E=f("edit"),R=f("minus"),N=f("el-table"),j=f("el-pagination"),A=f("el-card"),P=f("attendance-detail"),z=f("el-dialog"),T=f("attendance-edit"),H=f("attendance-new"),F=f("attendance-statistic"),U=p("loading");return h(),g("div",null,[v(A,{class:"card-ctrl"},{default:y((function(){return[v(l,{style:{margin:"15px"}},{default:y((function(){return[v(i,{span:24,class:"page-title-box"},{default:y((function(){return[oe,L("div",ue,[L("div",ie,[v(u,{modelValue:e.pickDate,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.pickDate=t}),type:"date",placeholder:"选择日期",onChange:e.fetchData},null,8,["modelValue","onChange"])])])]})),_:1})]})),_:1}),v(l,null,{default:y((function(){return[v(i,{span:10,style:{"text-align":"left"}},{default:y((function(){return[v(d,{type:"primary",size:"medium",onClick:e.onCreate},{default:y((function(){return[v(s,null,{default:y((function(){return[v(c)]})),_:1}),le]})),_:1},8,["onClick"]),v(d,{type:"info",size:"medium",onClick:e.onExport},{default:y((function(){return[v(s,null,{default:y((function(){return[v(_)]})),_:1}),ce]})),_:1},8,["onClick"]),v(d,{type:"info",size:"medium",onClick:e.onPrint},{default:y((function(){return[v(s,null,{default:y((function(){return[v(k)]})),_:1}),se]})),_:1},8,["onClick"]),v(d,{type:"success",size:"medium",onClick:e.onStatistic},{default:y((function(){return[v(s,null,{default:y((function(){return[v(C)]})),_:1}),de]})),_:1},8,["onClick"])]})),_:1}),v(i,{span:14,style:{"text-align":"right"}},{default:y((function(){return[v(x,{modelValue:e.searchKeyword,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.searchKeyword=t}),placeholder:"请输入关键词",style:{width:"200px","margin-right":"10px"}},null,8,["modelValue"])]})),_:1})]})),_:1}),fe,m((h(),S(N,{data:e.displayData(),stripe:"",class:"table",onSelectionChange:e.handleSelectionChange},{default:y((function(){return[v(O,{type:"selection",width:"55",align:"center",sortable:"",onSortChange:e.handleSortChange},null,8,["onSortChange"]),v(O,{prop:"userId",label:"用户ID",align:"center",sortable:"",onSortChange:e.handleSortChange},null,8,["onSortChange"]),v(O,{prop:"userName",label:"用户名",align:"center",sortable:"",onSortChange:e.handleSortChange},null,8,["onSortChange"]),v(O,{prop:"department",label:"部门",align:"center",sortable:"",onSortChange:e.handleSortChange},null,8,["onSortChange"]),v(O,{prop:"role",label:"职位",align:"center",sortable:"",onSortChange:e.handleSortChange},null,8,["onSortChange"]),v(O,{prop:"checkIn",label:"上班打卡时间",align:"center",sortable:"",onSortChange:e.handleSortChange},null,8,["onSortChange"]),v(O,{prop:"inLocation",label:"上班打卡位置",align:"center",sortable:"",onSortChange:e.handleSortChange},null,8,["onSortChange"]),v(O,{prop:"checkOut",label:"下班打卡时间",align:"center",sortable:"",onSortChange:e.handleSortChange},null,8,["onSortChange"]),v(O,{prop:"outLocation",label:"下班打卡位置",align:"center",sortable:"",onSortChange:e.handleSortChange},null,8,["onSortChange"]),v(O,{prop:"status",label:"考勤状态",width:"150",filters:[{text:"准时",value:"On Time"},{text:"迟到",value:"Late"},{text:"早退",value:"Leave Early"},{text:"缺席",value:"Absent"},{text:"迟到且缺席",value:"Late And Leave Early"}],"filter-method":e.filterStatus,"filter-placement":"bottom-end"},{default:y((function(e){return[v(D,{type:2===e.row.status?"primary":"success","disable-transitions":""},{default:y((function(){return[w(b(e.row.status),1)]})),_:2},1032,["type"])]})),_:1},8,["filter-method"]),v(O,{label:"操作",align:"center"},{default:y((function(t){return[v(V,{class:"item",effect:"dark",content:"详情",placement:"bottom"},{default:y((function(){return[v(d,{circle:"",plain:"",type:"info",size:"small",onClick:function(n){return e.onDetail(t.$index,t.row)}},{default:y((function(){return[v(s,null,{default:y((function(){return[v(I)]})),_:1})]})),_:2},1032,["onClick"])]})),_:2},1024),v(V,{class:"item",effect:"dark",content:"信息修改",placement:"bottom"},{default:y((function(){return[v(d,{circle:"",plain:"",type:"primary",size:"small",onClick:function(n){return e.onEdit(t.$index,t.row)}},{default:y((function(){return[v(s,null,{default:y((function(){return[v(E)]})),_:1})]})),_:2},1032,["onClick"])]})),_:2},1024),v(V,{class:"item",effect:"dark",content:"删除",placement:"bottom"},{default:y((function(){return[v(d,{circle:"",plain:"",type:"danger",size:"small",onClick:function(n){return e.onDelete(t.$index,t.row)}},{default:y((function(){return[v(s,null,{default:y((function(){return[v(R)]})),_:1})]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:1})]})),_:1},8,["data","onSelectionChange"])),[[U,e.loading]]),L("div",pe,[v(j,{"current-page":e.param.page,"page-size":e.param.size,layout:"sizes,prev,pager,next,total","page-sizes":[2,10,20,50],total:e.param.total,background:"",onCurrentChange:e.onCurrentChange,onSizeChange:e.onSizeChange},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])])]})),_:1}),v(z,{modelValue:e.detail_visible,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.detail_visible=t}),center:"",title:"考勤详情"},{default:y((function(){return[v(P,{"current-row":e.posted.userRow},null,8,["current-row"])]})),_:1},8,["modelValue"]),v(z,{modelValue:e.edit_visible,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.edit_visible=t}),center:"",title:e.posted.userRow.userRole},{default:y((function(){return[v(T,{"current-row":e.posted.userRow,onSuccess:e.onEditSuccess},null,8,["current-row","onSuccess"])]})),_:1},8,["modelValue","title"]),v(z,{modelValue:e.add_visible,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.add_visible=t}),title:"新增考勤"},{default:y((function(){return[v(H,{onSuccess:e.onCreateSuccess},null,8,["onSuccess"])]})),_:1},8,["modelValue"]),v(z,{modelValue:e.statistic_visible,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.statistic_visible=t}),center:"",title:"统计信息"},{default:y((function(){return[v(F,{data:e.data},null,8,["data"])]})),_:1},8,["modelValue"])])}]]))}}}))}();
