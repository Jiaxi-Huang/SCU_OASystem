var w=Object.defineProperty,y=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var v=(n,t,e)=>t in n?w(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,E=(n,t)=>{for(var e in t||(t={}))S.call(t,e)&&v(n,e,t[e]);if(C)for(var e of C(t))j.call(t,e)&&v(n,e,t[e]);return n},P=(n,t)=>y(n,L(t));import{r as c,_ as k}from"./index.63817855.js";import{E as O,aY as B,aI as T,aJ as D,aK as U,aL as I,aM as $,aN as x,J as q,e as M,r as F,B as Y,c as N,D as V,aq as z,m as J,f as h,g as m,t as W,s as K,i as o,y as f,F as Q,v as G,n as H,Q as b,p as X,h as Z}from"./vendor.e05abf4c.js";const a={baseURL:"http://127.0.0.1:8080/api",getAttendanceRecord:"/attendance/loadAttendance",addAttendance:"/attendance/addAttendance",delAttendance:"/attendance/delAttendance",editAttendance:"/attendance/editAttendance",personalAttendance:"/attendance/personalAttendance",checkInAttendance:"/attendance/checkInAttendance",checkOutAttendance:"/attendance/checkOutAttendance",exportAttendance:"/attendance/exportAttendance",printAttendance:"/attendance/printAttendance"};class he{static postAttendanceList(t){let e=B(t).format("YYYY-MM-DD");return c({url:`${a.baseURL+a.getAttendanceRecord}?pickDate=${e}`,method:"POST",json:!0}).then(r=>{if(r.status===0)return r})}static postAddAttendance(t){return c({url:a.baseURL+a.addAttendance,method:"POST",json:!0,data:t}).then(e=>e.status===0?Promise.resolve(e):(e.status===-2&&O.error("\u672A\u627E\u5230\u8BE5\u7528\u6237"),Promise.reject(e)))}static postDeleteAttendance(t){return c({url:`${a.baseURL+a.delAttendance}?id=${t}`,method:"POST",json:!0,id:t}).then(e=>e.status===0?Promise.resolve(e):Promise.reject(e))}static postEditAttendance(t){return c({url:a.baseURL+a.editAttendance,method:"POST",json:!0,data:t}).then(e=>e.status===0?Promise.resolve(e):Promise.reject(e))}static postPersonalAttendance(t){return c({url:`${a.baseURL+a.personalAttendance}?accessToken=${t.accessToken}`,method:"POST",json:!0}).then(e=>e.status===0?Promise.resolve(e):Promise.reject(e))}static postCheckInAttendance(t){return c({url:a.baseURL+a.checkInAttendance,method:"POST",json:!0,data:t}).then(e=>e.status===0||e.status===-1?Promise.resolve(e):Promise.reject(e))}static postCheckOutAttendance(t){return c({url:a.baseURL+a.checkOutAttendance,method:"POST",json:!0,data:t}).then(e=>e.status===0||e.status===-1||e.status===-2?Promise.resolve(e):Promise.reject(e))}static postAdminExportAttendance(t){return c({url:a.baseURL+a.exportAttendance,method:"POST",responseType:"blob",json:!0,data:t}).then(e=>{if(e)if(e instanceof Blob){const r=window.URL.createObjectURL(e),s=document.createElement("a");s.href=r,s.setAttribute("download","\u8003\u52E4\u5217\u8868_"+new Date().getTime()+".xls"),document.body.appendChild(s),s.click(),document.body.removeChild(s)}else console.error("\u54CD\u5E94\u6570\u636E\u4E0D\u662F Blob \u7C7B\u578B")}).catch(e=>{throw console.error("Error downloading excel:",e),e})}static postAdminPrintAttendance(t){return c({url:a.baseURL+a.printAttendance,method:"POST",responseType:"blob",json:!0,data:t}).then(e=>{if(e)if(e instanceof Blob){const r=window.URL.createObjectURL(e),s=document.createElement("a");s.href=r,s.setAttribute("download","\u8003\u52E4\u5217\u8868_"+new Date().getTime()+".pdf"),document.body.appendChild(s),s.click(),document.body.removeChild(s)}else console.error("\u54CD\u5E94\u6570\u636E\u4E0D\u662F Blob \u7C7B\u578B")}).catch(e=>{throw console.error("Error downloading pdf:",e),e})}}T([D,U,I,$,x]);let A;const ee=(n,t)=>{const e=q(n);A={tooltip:{trigger:"item"},legend:{top:"2%",left:"center"},series:[{type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"20",fontWeight:"bold"}},labelLine:{show:!1},data:t}]},A&&e.setOption(A)};const te=M({name:"RoleStatistic",props:{data:{type:Array,default:()=>[]}},setup(n){const t=F(null),e=Y({data:n.data||[],rolesCount:{}}),r={},s={\u7BA1\u7406\u5458:"icon-square red",\u90E8\u95E8\u7ECF\u7406:"icon-square green",\u5458\u5DE5:"icon-square deep-blue"},_=e.data.length,p=u=>s[u]||"icon-square",i=()=>{e.data.forEach(u=>{const l=r[u.status]||u.status;l&&(e.rolesCount[l]?e.rolesCount[l]++:e.rolesCount[l]=1)})},d=()=>{const u=Object.entries(e.rolesCount).map(([l,R])=>({name:l,value:R}));z(()=>{t.value&&ee(t.value,u)})};return N(()=>{i(),d()}),P(E({},V(e)),{getRoleIconClass:p,displayChart:d,doStatistics:i,roleMapping:r,roleIconMapping:s,refRolesChart:t,totalPeople:_})}}),g=n=>(X("data-v-3811f0be"),n=n(),Z(),n),ne=g(()=>o("span",null,[o("i",{class:"icon-square red"}),b(" \u603B\u4EBA\u6570")],-1)),ae=b(),se={class:"status"},oe=g(()=>o("h3",null,"\u6309\u8003\u52E4\u7EDF\u8BA1",-1)),re={class:"e-chart",style:{height:"201px",width:"100%"}},ce={ref:"refRolesChart",style:{width:"inherit",height:"inherit"}},de={class:"chart-widget-list"};function ue(n,t,e,r,s,_){const p=J("el-card");return h(),m("div",null,[W(p,{shadow:"hover",class:"card"},{default:K(()=>[o("p",null,[ne,ae,o("span",null,f(n.totalPeople),1)]),o("div",se,[oe,o("div",re,[o("div",ce,null,512)]),o("div",de,[(h(!0),m(Q,null,G(n.rolesCount,(i,d)=>(h(),m("p",{key:d},[o("span",null,[o("i",{class:H(n.getRoleIconClass(d))},null,2),b(" "+f(d),1)]),o("span",null,f(i),1)]))),128))])])]),_:1})])}var me=k(te,[["render",ue],["__scopeId","data-v-3811f0be"]]);export{me as A,he as S};
